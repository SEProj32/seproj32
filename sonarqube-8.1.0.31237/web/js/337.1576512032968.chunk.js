(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{1128:function(t,e,n){"use strict";var o,i=n(12),c=n(685),r=n.n(c),a=n(34),l=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var c=arguments[e],r=0,a=c.length;r<a;r++,i++)o[i]=c[r];return o},u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.isEnabled=function(t,e){return!!this.props.notifications.find(function(n){return n.type===t&&n.channel===e})},e.prototype.handleCheck=function(t,e,n){n?this.props.onAdd({type:t,channel:e}):this.props.onRemove({type:t,channel:e})},e.prototype.getDispatcherLabel=function(t){var e=["notification.dispatcher",t],n=s(e,["project"]);return this.props.project&&a.hasMessage.apply(void 0,n)?a.translate.apply(void 0,n):a.translate.apply(void 0,e)},e.prototype.render=function(){var t=this,e=this.props,n=e.channels,o=e.checkboxId,c=e.types;return i.createElement("tbody",null,c.map(function(e){return i.createElement("tr",{key:e},i.createElement("td",null,t.getDispatcherLabel(e)),n.map(function(n){return i.createElement("td",{className:"text-center",key:n},i.createElement(r.a,{checked:t.isEnabled(e,n),id:o(e,n),onCheck:function(o){return t.handleCheck(e,n,o)}}))}))}))},e}(i.PureComponent);e.a=u},1200:function(t,e,n){var o=n(1110);t.exports=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?o(t,void 0,e):[]}},1414:function(t,e,n){"use strict";var o=n(1200),i=n.n(o),c=n(12),r=n(48),a=n(651);var l=n(712);n.d(e,"a",function(){return d});var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(){return(p=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var c=arguments[e],r=0,a=c.length;r<a;r++,i++)o[i]=c[r];return o};function d(t){return function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={channels:[],globalTypes:[],loading:!0,notifications:[],perProjectTypes:[]},t.fetchNotifications=function(){Object(r.getJSON)("/api/notifications/list").catch(a.a).then(function(e){t.mounted&&t.setState({channels:e.channels,globalTypes:e.globalTypes,loading:!1,notifications:e.notifications,perProjectTypes:e.perProjectTypes})},function(){t.mounted&&t.setState({loading:!1})})},t.addNotificationToState=function(e){t.setState(function(n){return{notifications:i()(f(n.notifications,[e]),t.areNotificationsEqual)}})},t.removeNotificationFromState=function(e){t.setState(function(n){return{notifications:n.notifications.filter(function(n){return!t.areNotificationsEqual(n,e)})}})},t.addNotification=function(e){t.addNotificationToState(e),function(t){return Object(r.post)("/api/notifications/add",t).catch(a.a)}({channel:e.channel,project:e.project,type:e.type}).catch(function(){t.removeNotificationFromState(e)})},t.removeNotification=function(e){t.removeNotificationFromState(e),function(t){return Object(r.post)("/api/notifications/remove",t).catch(a.a)}({channel:e.channel,project:e.project,type:e.type}).catch(function(){t.addNotificationToState(e)})},t.areNotificationsEqual=function(t,e){return t.channel===e.channel&&t.type===e.type&&t.project===e.project},t}return u(n,e),n.prototype.componentDidMount=function(){this.mounted=!0,this.fetchNotifications()},n.prototype.componentWillUnmount=function(){this.mounted=!1},n.prototype.render=function(){var e=this.state,n=e.channels,o=e.globalTypes,i=e.loading,r=e.notifications,a=e.perProjectTypes;return c.createElement(t,p({},this.props,{addNotification:this.addNotification,channels:n,globalTypes:o,loading:i,notifications:r,perProjectTypes:a,removeNotification:this.removeNotification}))},n.displayName=Object(l.a)(t,"withNotifications"),n}(c.Component)}},2094:function(t,e,n){"use strict";n.r(e),n.d(e,"ProjectNotifications",function(){return b});var o=n(12),i=n(640),c=n(655),r=n.n(c),a=n(689),l=n.n(a),s=n(649),u=n(644),p=n.n(u),f=n(34),d=n(1414),h=n(1128);function b(t){var e=t.channels,n=t.className,c=t.component,a=t.loading,u=t.notifications,d=t.perProjectTypes,b=Object(f.translate)("my_account.notifications"),m=function(e){var n=e.channel,o=e.type;t.addNotification({project:c.key,channel:n,type:o})},y=function(e){var n=e.channel,o=e.type;t.removeNotification({project:c.key,channel:n,type:o})},k=function(t,e){return"project-notification-"+c.key+"-"+t+"-"+e},v=u.filter(function(t){return t.project&&t.project===c.key});return o.createElement("div",{className:n},o.createElement(l.a,{modal:function(t){var n=t.onClose;return o.createElement(r.a,{contentLabel:b,onRequestClose:n},o.createElement("header",{className:"modal-head"},o.createElement("h2",null,b)),o.createElement("div",{className:"modal-body"},o.createElement(s.Alert,{variant:"info"},Object(f.translate)("notification.dispatcher.information")),o.createElement(p.a,{loading:a},o.createElement("table",{className:"data zebra notifications-table"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{"aria-label":Object(f.translate)("project")}),e.map(function(t){return o.createElement("th",{className:"text-center",key:t},o.createElement("h4",null,Object(f.translate)("notification.channel",t)))}))),o.createElement(h.a,{channels:e,checkboxId:k,notifications:v,onAdd:m,onRemove:y,project:!0,types:d})))),o.createElement("footer",{className:"modal-foot"},o.createElement(i.ResetButtonLink,{className:"js-modal-close",onClick:n},Object(f.translate)("close"))))}},function(t){var e=t.onClick;return o.createElement(i.Button,{onClick:e},o.createElement("span",{"data-test":"overview__edit-notifications"},Object(f.translate)("my_profile.per_project_notifications.edit")))}))}e.default=Object(d.a)(b)},685:function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var c=n(639),r=n(12),a=n(644);n(716);var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleClick=function(t){t.preventDefault(),t.currentTarget.blur(),e.props.disabled||e.props.onCheck(!e.props.checked,e.props.id)},e}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.checked,n=t.children,o=t.disabled,i=t.id,l=t.loading,s=t.right,u=t.thirdState,p=t.title,f=c("icon-checkbox",{"icon-checkbox-checked":e,"icon-checkbox-single":u,"icon-checkbox-disabled":o});return n?r.createElement("a",{"aria-checked":e,className:c("link-checkbox",this.props.className,{note:o,disabled:o}),href:"#",id:i,onClick:this.handleClick,role:"checkbox",title:p},s&&n,r.createElement(a.default,{loading:Boolean(l)},r.createElement("i",{className:f})),!s&&n):l?r.createElement(a.default,null):r.createElement("a",{"aria-checked":e,className:c(f,this.props.className),href:"#",id:i,onClick:this.handleClick,role:"checkbox",title:p})},e.defaultProps={thirdState:!1},e}(r.PureComponent);e.default=l},689:function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var c=n(12),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mounted=!1,e.state={modal:!1},e.handleButtonClick=function(){e.setState({modal:!0})},e.handleFormSubmit=function(t){t&&t.preventDefault(),e.setState({modal:!0})},e.handleCloseModal=function(){e.mounted&&e.setState({modal:!1})},e}return i(e,t),e.prototype.componentDidMount=function(){this.mounted=!0},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.render=function(){return c.createElement(c.Fragment,null,this.props.children({onClick:this.handleButtonClick,onFormSubmit:this.handleFormSubmit}),this.state.modal&&this.props.modal({onClose:this.handleCloseModal}))},e}(c.PureComponent);e.default=r},716:function(t,e,n){var o=n(717);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(643)(o,i);o.locals&&(t.exports=o.locals)},717:function(t,e,n){(t.exports=n(642)(!1)).push([t.i,".icon-checkbox{display:inline-block;line-height:1;vertical-align:top;padding:1px 2px;box-sizing:border-box}a.icon-checkbox{border-bottom:none}.icon-checkbox:focus{outline:none}.icon-checkbox:before{content:\" \";display:inline-block;width:10px;height:10px;border:1px solid #236a97;border-radius:2px;transition:border-color .2s ease,background-color .2s ease,background-image .2s ease,box-shadow .4s ease}.icon-checkbox:not(.icon-checkbox-disabled):focus:before,.link-checkbox:not(.disabled):focus:focus .icon-checkbox:before{box-shadow:0 0 0 3px rgba(35,106,151,.25)}.icon-checkbox-checked:before{background-color:#4b9fd5;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M12 4.665c0 .172-.06.318-.18.438l-5.55 5.55c-.12.12-.266.18-.438.18s-.318-.06-.438-.18L2.18 7.438C2.06 7.317 2 7.17 2 7s.06-.318.18-.44l.878-.876c.12-.12.267-.18.44-.18.17 0 .317.06.437.18l1.897 1.903 4.233-4.24c.12-.12.266-.18.438-.18s.32.06.44.18l.876.88c.12.12.18.265.18.438z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E\");border-color:#4b9fd5}.icon-checkbox-checked.icon-checkbox-single:before{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M10 4.698A.697.697 0 0 0 9.302 4H4.698A.697.697 0 0 0 4 4.698v4.604c0 .386.312.698.698.698h4.604A.697.697 0 0 0 10 9.302V4.698z' fill='%23fff'/%3E%3C/svg%3E\")}.icon-checkbox-disabled:before{border:1px solid #bbb;cursor:not-allowed}.icon-checkbox-disabled.icon-checkbox-checked:before{background-color:#bbb}.icon-checkbox-invisible{visibility:hidden}.link-checkbox{color:inherit;border-bottom:none}.link-checkbox.disabled,.link-checkbox.disabled:hover,.link-checkbox.disabled label{color:#777;cursor:not-allowed}.link-checkbox:active,.link-checkbox:focus,.link-checkbox:hover{color:inherit}",""])}}]);
//# sourceMappingURL=337.1576512032968.chunk.js.map