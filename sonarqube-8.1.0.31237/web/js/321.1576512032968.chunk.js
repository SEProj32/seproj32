(window.webpackJsonp=window.webpackJsonp||[]).push([[321],{1104:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var a=n(48),r=n(651);function o(e){return Object(a.getJSON)("/api/new_code_periods/show",e).catch(r.a)}function i(e){return Object(a.post)("/api/new_code_periods/set",e).catch(r.a)}function s(e){return Object(a.post)("/api/new_code_periods/unset",e).catch(r.a)}function c(e){return Object(a.getJSON)("/api/new_code_periods/list",e).catch(r.a)}},1105:function(e,t,n){"use strict";function a(e){var t=parseInt(e,10);return!(e.length<1||isNaN(t)||t<1||String(t)!==e)}function r(e){var t=e.analysis,n=e.days;switch(e.type){case"NUMBER_OF_DAYS":return n;case"SPECIFIC_ANALYSIS":return t;default:return}}function o(e){var t=e.analysis,n=void 0===t?"":t,r=e.currentSetting,o=e.currentSettingValue,i=e.days,s=e.selected,c=e.overrideGeneralSetting;return{isChanged:r||void 0===c?!1===c||s!==r||"NUMBER_OF_DAYS"===s&&i!==o||"SPECIFIC_ANALYSIS"===s&&n!==o:c,isValid:!1===c||"PREVIOUS_VERSION"===s||"SPECIFIC_ANALYSIS"===s&&n.length>0||"NUMBER_OF_DAYS"===s&&a(i)}}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o})},1152:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(12),r=n(771),o=n.n(r),i=n(898),s=n.n(i),c=n(34);function l(e){var t=e.className,n=e.days,r=e.disabled,i=e.isChanged,l=e.isValid,u=e.onChangeDays,p=e.onSelect,d=e.selected;return a.createElement(o.a,{className:t,disabled:r,onClick:function(){return p("NUMBER_OF_DAYS")},selected:d,title:Object(c.translate)("baseline.number_days")},a.createElement(a.Fragment,null,a.createElement("p",{className:"big-spacer-bottom"},Object(c.translate)("baseline.number_days.description")),d&&a.createElement(s.a,{error:void 0,id:"baseline_number_of_days",isInvalid:i&&!l,isValid:i&&l,label:Object(c.translate)("baseline.specify_days"),required:!0},a.createElement("input",{onChange:function(e){return u(e.currentTarget.value)},type:"text",value:n}))))}},1153:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(12),r=n(771),o=n.n(r),i=n(34);function s(e){var t=e.disabled,n=e.isDefault,r=e.onSelect,s=e.selected;return a.createElement(o.a,{disabled:t,onClick:function(){return r("PREVIOUS_VERSION")},selected:s,title:Object(i.translate)("baseline.previous_version")+(n?" ("+Object(i.translate)("default")+")":"")},a.createElement("p",null,Object(i.translate)("baseline.previous_version.description")))}},2020:function(e,t,n){var a=n(2021);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(643)(a,r);a.locals&&(e.exports=a.locals)},2021:function(e,t,n){(e.exports=n(642)(!1)).push([e.i,".side-tabs-layout{display:flex;justify-content:space-between;align-items:stretch}.modal .side-tabs-layout{padding-left:10px;background-color:#f3f3f3}.side-tabs-main{position:relative;z-index:2;flex-grow:1;padding:15px 20px;border:1px solid #e6e6e6;box-sizing:border-box;background-color:#fff;overflow:auto}.modal .side-tabs-main{border-top:none;border-bottom:none;border-right:none}.side-tabs-side{position:relative;z-index:3;width:160px;flex-shrink:0;padding:10px 0;box-sizing:border-box;transform:translateX(1px)}.side-tabs-menu>li{margin-bottom:4px}.side-tabs-menu>li>a{display:block;padding:10px;line-height:1.5;border-top-left-radius:3px;border-bottom-left-radius:3px;border:1px solid #e6e6e6;border-right:none;overflow:hidden;text-overflow:ellipsis;transition:color .3s ease,background-color .3s ease}.side-tabs-menu>li>a.active,.side-tabs-menu>li>a:focus,.side-tabs-menu>li>a:hover{background-color:#fff}.side-tabs-menu>li>a.active{color:#444;cursor:default}",""])},2022:function(e,t,n){var a=n(2023);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(643)(a,r);a.locals&&(e.exports=a.locals)},2023:function(e,t,n){(e.exports=n(642)(!1)).push([e.i,".settings-layout{margin-bottom:60px}.settings-definitions-list>li+li{margin-top:30px}.settings-definition{margin:0 -20px;padding:10px 20px;border-top:1px solid transparent;border-bottom:1px solid transparent;display:flex;align-items:stretch}.settings-definition-changed{border-top:1px solid #faebcc;border-bottom:1px solid #faebcc;background-color:#fcf8e3}.settings-definition-left{width:330px;padding-right:30px;box-sizing:border-box}.settings-definition-right{position:relative;width:calc(100% - 330px);box-sizing:border-box}.settings-definition-name{text-overflow:ellipsis}.settings-definition-key{line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.settings-definition-key:hover{overflow:visible}.settings-definition-state{min-height:32px;padding-bottom:4px}.settings-definition-state>span{display:flex}.settings-definition-changes{margin-top:20px;padding-top:20px;border-top:1px dotted #e6e6e6}.settings-sub-categories-list>li+li,.settings-sub-category{margin:30px -20px 0;padding:30px 20px;border-top:1px solid #e6e6e6}.settings-sub-category-name{margin-bottom:20px;font-size:16px}.settings-sub-category-description{margin-top:-15px;margin-bottom:20px;color:#777}.settings-large-input{width:100%!important;max-width:400px;min-width:200px}",""])},2095:function(e,t,n){"use strict";n.r(t);var a=n(867),r=n.n(a),o=n(12),i=n(654),s=n.n(i),c=n(646),l=n(34),u=n(662),p=n(648),d=(n(2020),n(48)),m=n(948),f=n(711),g=n(828),h=n(1430),b=n(1173),y=n(1116);function v(e,t){return function(n){return t(Object(b.j)(e)),Object(d.parseError)(n).then(function(n){return t(Object(b.d)(e,n)),Promise.reject()})}}n(2022);var E,_="languages",O=n(159),j=n(656),C=n.n(j),S=n(941),k=n.n(S),N=n(726),w=n.n(N),D=n(639),P=n.n(D),x=n(827),A=n.n(x),F=n(763),B=n.n(F),T=n(640),I=n(655),U=n.n(I),V=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={reseting:!1},t.handleClose=function(){t.setState({reseting:!1})},t.handleReset=function(){t.setState({reseting:!0})},t.handleSubmit=function(){t.props.onReset(),t.handleClose()},t}return V(t,e),t.prototype.renderModal=function(){var e=Object(l.translate)("settings.reset_confirm.title");return o.createElement(U.a,{contentLabel:e,onRequestClose:this.handleClose},o.createElement("header",{className:"modal-head"},o.createElement("h2",null,e)),o.createElement("form",{onSubmit:this.handleSubmit},o.createElement("div",{className:"modal-body"},o.createElement("p",null,Object(l.translate)("settings.reset_confirm.description"))),o.createElement("footer",{className:"modal-foot"},o.createElement(T.SubmitButton,{className:"button-red"},Object(l.translate)("reset_verb")),o.createElement(T.ResetButtonLink,{onClick:this.handleClose},Object(l.translate)("cancel")))))},t.prototype.render=function(){var e=this.props,t=e.setting,n=e.isDefault,a=e.changedValue,r=e.hasValueChanged,i=!Object(g.m)(t.definition,Object(g.g)(t)),s=null!=a&&Object(g.m)(t.definition,a),c=i&&(s||!n&&!r);return o.createElement(o.Fragment,null,n&&!r&&o.createElement("div",{className:"spacer-top note",style:{lineHeight:"24px"}},Object(l.translate)("settings._default")),o.createElement("div",{className:"settings-definition-changes nowrap"},r&&o.createElement(T.Button,{className:"spacer-right button-success",disabled:this.props.hasError,onClick:this.props.onSave},Object(l.translate)("save")),c&&o.createElement(T.Button,{className:"spacer-right",onClick:this.handleReset},Object(l.translate)("reset_verb")),r&&o.createElement(T.ResetButtonLink,{className:"spacer-right",onClick:this.props.onCancel},Object(l.translate)("cancel")),c&&o.createElement("span",{className:"note"},Object(l.translate)("default"),": ",Object(g.c)(t)),this.state.reseting&&this.renderModal()))},t}(o.PureComponent),R=n(1393),K=n.n(R);var M=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputChange=function(e){t.props.onChange(e.currentTarget.value)},t.handleKeyDown=function(e){13===e.keyCode&&t.props.onSave?t.props.onSave():27===e.keyCode&&t.props.onCancel&&t.props.onCancel()},t}return M(t,e),t.prototype.render=function(){return o.createElement("input",{className:D("text-top",this.props.className),name:this.props.name,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,type:this.props.type,value:this.props.value||""})},t}(o.PureComponent),z=function(){return(z=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function q(e){return o.createElement(G,z({},e,{className:"input-small",type:"text"}))}var H=n(1106),W=n.n(H),Y=n(663),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={changing:!t.props.value},t.handleInputChange=function(e){t.props.onChange(e.target.value)},t.handleChangeClick=function(){t.setState({changing:!0})},t}return Z(t,e),t.prototype.componentWillReceiveProps=function(e){!this.props.hasValueChanged&&this.props.value===e.value||e.hasValueChanged||this.setState({changing:!e.value})},t.prototype.renderInput=function(){return o.createElement("form",null,o.createElement("input",{className:"hidden",type:"password"}),o.createElement("input",{autoComplete:"off",autoFocus:this.state.changing&&this.props.value,className:"js-password-input settings-large-input text-top",name:this.props.name,onChange:this.handleInputChange,type:"password",value:this.props.value}))},t.prototype.render=function(){return this.state.changing?this.renderInput():o.createElement(o.Fragment,null,o.createElement(W.a,{className:"text-middle big-spacer-right",fill:Y.colors.gray60}),o.createElement(T.Button,{className:"text-middle",onClick:this.handleChangeClick},Object(l.translate)("change_verb")))},t}(o.PureComponent),X=n(666),Q=n.n(X),$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputChange=function(e){var n=e.value;t.props.onChange(n)},t}return $(t,e),t.prototype.render=function(){var e=this.props.options.map(function(e){return{label:e,value:e}});return o.createElement(Q.a,{className:"settings-large-input",clearable:!1,name:this.props.name,onChange:this.handleInputChange,options:e,value:this.props.value})},t}(o.PureComponent),te=function(){return(te=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ne(e){return o.createElement(G,te({},e,{className:"settings-large-input",type:"text"}))}var ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputChange=function(e){t.props.onChange(e.target.value)},t}return ae(t,e),t.prototype.render=function(){return o.createElement("textarea",{className:"settings-large-input text-top",name:this.props.name,onChange:this.handleInputChange,rows:5,value:this.props.value||""})},t}(o.PureComponent),oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},se=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},ce={STRING:ne,TEXT:re,PASSWORD:J,BOOLEAN:function(e){var t=e.onChange,n=e.name,a=e.value,r=null!=a&&a;return o.createElement("div",{className:"display-inline-block text-top"},o.createElement(K.a,{name:n,onChange:t,value:r}),null==a&&o.createElement("span",{className:"spacer-left note"},Object(l.translate)("settings.not_set")))},INTEGER:q,LONG:q,FLOAT:q},le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oe(t,e),t.prototype.render=function(){var e=this.props,t=e.setting,n=se(e,["setting"]),a=t.definition,r=this.props.name||Object(g.j)(a);if("SINGLE_SELECT_LIST"===a.type)return o.createElement(ee,ie({isDefault:Object(g.l)(t),name:r,options:a.options},n));var i=a.type&&ce[a.type]||ne;return o.createElement(i,ie({isDefault:Object(g.l)(t),name:r},n))},t}(o.PureComponent),ue=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},de=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,r++)a[r]=o[i];return a},me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ensureValue=function(){return t.props.value||[]},t.handleSingleInputChange=function(e,n){var a=de(t.ensureValue());a.splice(e,1,n),t.props.onChange(a)},t.handleDeleteValue=function(e){var n=de(t.ensureValue());n.splice(e,1),t.props.onChange(n)},t}return ue(t,e),t.prototype.renderInput=function(e,t,n){var a=this,r=this.props.setting;return o.createElement("li",{className:"spacer-bottom",key:t},o.createElement(le,{hasValueChanged:this.props.hasValueChanged,onChange:function(e){return a.handleSingleInputChange(t,e)},setting:pe(pe({},r),{definition:pe(pe({},r.definition),{multiValues:!1}),values:void 0}),value:e}),!n&&o.createElement("div",{className:"display-inline-block spacer-left"},o.createElement(T.DeleteButton,{className:"js-remove-value",onClick:function(){return a.handleDeleteValue(t)}})))},t.prototype.render=function(){var e=this,t=de(this.ensureValue(),Object(g.d)(this.props.setting.definition));return o.createElement("div",null,o.createElement("ul",null,t.map(function(n,a){return e.renderInput(n,a,a===t.length-1)})))},t}(o.PureComponent),fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ge=function(){return(ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},he=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,r++)a[r]=o[i];return a},be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDeleteValue=function(e){var n=he(t.ensureValue());n.splice(e,1),t.props.onChange(n)},t.handleInputChange=function(e,n,a){var r,o=Object(g.d)(t.props.setting.definition)[0],i=he(t.ensureValue()),s=ge(ge(ge({},o),i[e]),((r={})[n]=a,r));return i.splice(e,1,s),t.props.onChange(i)},t}return fe(t,e),t.prototype.ensureValue=function(){return this.props.value||[]},t.prototype.renderFields=function(e,t,n){var a=this,r=this.props.setting,i=r.definition;return o.createElement("tr",{key:t},Object(g.k)(i)&&i.fields.map(function(n){return o.createElement("td",{key:n.key},o.createElement(le,{hasValueChanged:a.props.hasValueChanged,name:Object(g.j)(i,n.key),onChange:function(e){return a.handleInputChange(t,n.key,e)},setting:ge(ge({},r),{definition:n,value:e[n.key]}),value:e[n.key]}))}),o.createElement("td",{className:"thin nowrap text-middle"},!n&&o.createElement(T.DeleteButton,{className:"js-remove-value",onClick:function(){return a.handleDeleteValue(t)}})))},t.prototype.render=function(){var e=this,t=this.props.setting.definition,n=he(this.ensureValue(),Object(g.d)(t));return o.createElement("div",null,o.createElement("table",{className:"data zebra-hover no-outer-padding",style:{width:"auto",minWidth:480,marginTop:-12}},o.createElement("thead",null,o.createElement("tr",null,Object(g.k)(t)&&t.fields.map(function(e){return o.createElement("th",{key:e.key},e.name,null!=e.description&&o.createElement("span",{className:"spacer-top small"},e.description))}),o.createElement("th",null,"Â "))),o.createElement("tbody",null,n.map(function(t,a){return e.renderFields(t,a,a===n.length-1)}))))},t}(o.PureComponent),ye=function(){return(ye=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ve(e){var t=e.setting.definition;return Object(g.k)(t)&&t.multiValues?o.createElement(me,ye({},e)):"PROPERTY_SET"===t.type?o.createElement(be,ye({},e)):o.createElement(le,ye({},e))}var Ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),_e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={success:!1},t.handleChange=function(e){clearTimeout(t.timeout),t.props.changeValue(t.props.setting.definition.key,e),t.handleCheck()},t.handleReset=function(){var e=t.props,n=e.component,a=e.setting.definition,r=n&&n.key;return t.props.resetValue(a.key,r).then(function(){t.props.cancelChange(a.key),t.safeSetState({success:!0}),t.timeout=window.setTimeout(function(){return t.safeSetState({success:!1})},3e3)})},t.handleCancel=function(){var e=t.props.setting;t.props.cancelChange(e.definition.key),t.props.passValidation(e.definition.key)},t.handleCheck=function(){var e=t.props.setting;t.props.checkValue(e.definition.key)},t.handleSave=function(){if(null!=t.props.changedValue){t.safeSetState({success:!1});var e=t.props,n=e.component,a=e.setting;t.props.saveValue(a.definition.key,n&&n.key).then(function(){t.safeSetState({success:!0}),t.timeout=window.setTimeout(function(){return t.safeSetState({success:!1})},3e3)},function(){})}},t}return Ee(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.safeSetState=function(e){this.mounted&&this.setState(e)},t.prototype.render=function(){var e=this.props,t=e.changedValue,n=e.loading,a=e.setting,r=e.validationMessage,i=a.definition,s=Object(g.f)(i),c=null!=r,u=null!=t,p=u?t:Object(g.g)(a),d=Object(g.l)(a),m=Object(g.e)(i);return o.createElement("div",{className:P()("settings-definition",{"settings-definition-changed":u}),"data-key":i.key},o.createElement("div",{className:"settings-definition-left"},o.createElement("h3",{className:"settings-definition-name",title:s},s),m&&o.createElement("div",{className:"markdown small spacer-top",dangerouslySetInnerHTML:{__html:Object(g.n)(m)}}),o.createElement("div",{className:"settings-definition-key note little-spacer-top"},Object(l.translateWithParameters)("settings.key_x",i.key))),o.createElement("div",{className:"settings-definition-right"},o.createElement("div",{className:"settings-definition-state"},n&&o.createElement("span",{className:"text-info"},o.createElement("i",{className:"spinner spacer-right"}),Object(l.translate)("settings.state.saving")),!n&&r&&o.createElement("span",{className:"text-danger"},o.createElement(A.a,{className:"spacer-right"}),o.createElement("span",null,Object(l.translateWithParameters)("settings.state.validation_failed",r))),!n&&!c&&this.state.success&&o.createElement("span",{className:"text-success"},o.createElement(B.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved"))),o.createElement(ve,{hasValueChanged:u,onCancel:this.handleCancel,onChange:this.handleChange,onSave:this.handleSave,setting:a,value:p}),o.createElement(L,{changedValue:t,hasError:c,hasValueChanged:u,isDefault:d,onCancel:this.handleCancel,onReset:this.handleReset,onSave:this.handleSave,setting:a})))},t}(o.PureComponent),Oe={cancelChange:b.a,changeValue:b.b,checkValue:function(e){return function(t,n){var a=n(),r=Object(p.getSettingsAppDefinition)(a,e),o=Object(p.getSettingsAppChangedValue)(a,e);return Object(g.m)(r,o)?(void 0===r.defaultValue?t(Object(b.d)(e,Object(l.translate)("settings.state.value_cant_be_empty_no_default"))):t(Object(b.d)(e,Object(l.translate)("settings.state.value_cant_be_empty"))),!1):(t(Object(b.h)(e)),!0)}},passValidation:b.h,resetValue:function(e,t){return function(n){return n(Object(b.i)(e)),Object(m.f)({keys:e,component:t}).then(function(){return Object(m.e)({keys:e,component:t})}).then(function(a){a.length>0?n(Object(y.c)(a,t)):n(Object(y.c)([{key:e}],t)),n(Object(b.h)(e)),n(Object(b.j)(e))}).catch(v(e,n))}},saveValue:function(e,t){return function(n,a){n(Object(b.i)(e));var r=a(),o=Object(p.getSettingsAppDefinition)(r,e),i=Object(p.getSettingsAppChangedValue)(r,e);return Object(g.m)(o,i)?(n(Object(b.d)(e,Object(l.translate)("settings.state.value_cant_be_empty"))),n(Object(b.j)(e)),Promise.reject()):Object(m.h)(o,i,t).then(function(){return Object(m.e)({keys:e,component:t})}).then(function(a){n(Object(y.c)(a,t)),n(Object(b.a)(e)),n(Object(b.h)(e)),n(Object(b.j)(e))}).catch(v(e,n))}}},je=Object(c.connect)(function(e,t){return{changedValue:Object(p.getSettingsAppChangedValue)(e,t.setting.definition.key),loading:Object(p.isSettingsAppLoading)(e,t.setting.definition.key),validationMessage:Object(p.getSettingsAppValidationMessage)(e,t.setting.definition.key)}},Oe)(_e);function Ce(e){var t=e.component,n=e.settings;return o.createElement("ul",{className:"settings-definitions-list"},n.map(function(e){return o.createElement("li",{key:e.definition.key},o.createElement(je,{component:t,setting:e}))}))}var Se=n(649),ke=n(644),Ne=n.n(ke),we=n(768),De=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Pe=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleError=function(e){return Object(d.parseError)(e).then(function(e){n.mounted&&n.setState({error:e,loading:!1})})},n.handleFormSubmit=function(e){e.preventDefault(),n.setState({success:!1,error:void 0,loading:!0});var t=n.state,a=t.recipient,r=t.subject,o=t.message;Object(m.g)(a,r,o).then(function(){n.mounted&&n.setState({success:!0,loading:!1})},n.handleError)},n.onRecipientChange=function(e){n.setState({recipient:e.target.value})},n.onSubjectChange=function(e){n.setState({subject:e.target.value})},n.onMessageChange=function(e){n.setState({message:e.target.value})},n.state={recipient:n.props.currentUser.email||"",subject:Object(l.translate)("email_configuration.test.subject"),message:Object(l.translate)("email_configuration.test.message_text"),loading:!1,success:!1},n}return De(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return o.createElement("div",{className:"settings-definition"},o.createElement("div",{className:"settings-definition-left"},o.createElement("h3",{className:"settings-definition-name"},Object(l.translate)("email_configuration.test.title"))),o.createElement("form",{className:"settings-definition-right",onSubmit:this.handleFormSubmit},this.state.success&&o.createElement("div",{className:"form-field"},o.createElement(Se.Alert,{variant:"success"},Object(l.translateWithParameters)("email_configuration.test.email_was_sent_to_x",this.state.recipient))),null!=this.state.error&&o.createElement("div",{className:"form-field"},o.createElement(Se.Alert,{variant:"error"},this.state.error)),o.createElement("div",{className:"form-field"},o.createElement("label",{htmlFor:"test-email-to"},Object(l.translate)("email_configuration.test.to_address"),o.createElement("em",{className:"mandatory"},"*")),o.createElement("input",{className:"settings-large-input",disabled:this.state.loading,id:"test-email-to",onChange:this.onRecipientChange,required:!0,type:"email",value:this.state.recipient})),o.createElement("div",{className:"form-field"},o.createElement("label",{htmlFor:"test-email-subject"},Object(l.translate)("email_configuration.test.subject")),o.createElement("input",{className:"settings-large-input",disabled:this.state.loading,id:"test-email-subject",onChange:this.onSubjectChange,type:"text",value:this.state.subject})),o.createElement("div",{className:"form-field"},o.createElement("label",{htmlFor:"test-email-message"},Object(l.translate)("email_configuration.test.message"),o.createElement("em",{className:"mandatory"},"*")),o.createElement("textarea",{className:"settings-large-input",disabled:this.state.loading,id:"test-email-message",onChange:this.onMessageChange,required:!0,rows:5,value:this.state.message})),o.createElement(T.SubmitButton,{disabled:this.state.loading},Object(l.translate)("email_configuration.test.send")),this.state.loading&&o.createElement(Ne.a,{className:"spacer-left"})))},t}(o.PureComponent),xe=Object(we.a)(Pe),Ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderEmailForm=function(e){return"general"===t.props.category&&"email"===e?o.createElement(xe,null):null},t}return Ae(t,e),t.prototype.componentDidMount=function(){this.fetchValues()},t.prototype.componentDidUpdate=function(e){var t=e.settings.map(function(e){return e.definition.key}),n=this.props.settings.map(function(e){return e.definition.key});e.component===this.props.component&&k()(t,n)||this.fetchValues()},t.prototype.fetchValues=function(){var e=this.props.settings.map(function(e){return e.definition.key}).join();this.props.fetchValues(e,this.props.component&&this.props.component.key)},t.prototype.render=function(){var e=this,t=w()(this.props.settings,function(e){return e.definition.subCategory}),n=Object.keys(t).map(function(e){return{key:e,name:Object(g.i)(t[e][0].definition.category,e),description:Object(g.h)(t[e][0].definition.category,e)}}),a=C()(n,function(e){return e.name.toLowerCase()});return o.createElement("ul",{className:"settings-sub-categories-list"},a.map(function(n){return o.createElement("li",{key:n.key},o.createElement("h2",{className:"settings-sub-category-name"},n.name),null!=n.description&&o.createElement("div",{className:"settings-sub-category-description markdown",dangerouslySetInnerHTML:{__html:Object(g.n)(n.description)}}),o.createElement(Ce,{component:e.props.component,settings:t[n.key]}),e.renderEmailForm(n.key))}))},t}(o.PureComponent),Be={fetchValues:function(e,t){return function(n){return Object(m.e)({keys:e,component:t}).then(function(e){n(Object(y.c)(e,t)),n(Object(f.c)())})}}},Te=Object(c.connect)(function(e,t){return{settings:Object(p.getSettingsAppSettingsForCategory)(e,t.category,t.component&&t.component.key)}},Be)(Fe);function Ie(e){var t=e.component,n=e.selectedCategory;return o.createElement(o.Fragment,null,o.createElement("p",{className:"spacer-bottom"},Object(l.translate)("settings.analysis_scope.wildcards.introduction"),o.createElement(O.Link,{className:"spacer-left",to:"/documentation/project-administration/narrowing-the-focus/"},Object(l.translate)("learn_more"))),o.createElement("table",{className:"data spacer-bottom"},o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",null,"*"),o.createElement("td",null,Object(l.translate)("settings.analysis_scope.wildcards.zero_more_char"))),o.createElement("tr",null,o.createElement("td",null,"**"),o.createElement("td",null,Object(l.translate)("settings.analysis_scope.wildcards.zero_more_dir"))),o.createElement("tr",null,o.createElement("td",null,"?"),o.createElement("td",null,Object(l.translate)("settings.analysis_scope.wildcards.single_char"))))),o.createElement("div",{className:"settings-sub-category"},o.createElement(Te,{category:n,component:t})))}var Ue=n(677),Ve={abap:_,apex:_,"c / c++ / objective-c":_,"c#":_,cobol:_,css:_,flex:_,go:_,html:_,java:_,javascript:_,kotlin:_,php:_,"pl/i":_,"pl/sql":_,python:_,rpg:_,ruby:_,scala:_,swift:_,"t-sql":_,typescript:_,"vb.net":_,"visual basic":_,xml:_},Le=function(){return(Le=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Re,Ke=Object(Ue.a)(Object(c.connect)(function(e){return{categories:Object(p.getSettingsAppAllCategories)(e)}})(function(e){var t=e.categories,n=e.component,a=e.location,r=e.router,i=function(e,t){var n=_.toLowerCase(),a=t.toLowerCase(),r=e.filter(function(e){return Ve[e.toLowerCase()]===n}).map(function(e){return{label:Object(g.b)(e),value:e.toLowerCase(),originalValue:e}}),o=void 0;return a!==n&&r.find(function(e){return e.value===a})&&(o=a),{availableLanguages:r,selectedLanguage:o}}(t,e.selectedCategory),s=i.availableLanguages,c=i.selectedLanguage;return o.createElement(o.Fragment,null,o.createElement("h2",{className:"settings-sub-category-name"},Object(l.translate)("property.category.languages")),o.createElement("div",{"data-test":"language-select"},o.createElement(Q.a,{className:"input-large",onChange:function(e){r.push(Le(Le({},a),{query:Le(Le({},a.query),{category:e.originalValue})}))},options:s,placeholder:Object(l.translate)("settings.languages.select_a_language_placeholder"),value:c})),c&&o.createElement("div",{className:"settings-sub-category"},o.createElement(Te,{category:c,component:n})))})),Me=n(634),Ge=n(1104),ze=n(1152),qe=n(1153),He=n(1105),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0,days:"30",saving:!1,success:!1},t.onSelectDays=function(e){t.setState({days:e,success:!1})},t.onSelectSetting=function(e){t.setState({selected:e,success:!1})},t.onCancel=function(){t.setState(function(e){var t=e.currentSetting,n=e.currentSettingValue,a=e.days;return{selected:t,days:"NUMBER_OF_DAYS"===t?String(n):a}})},t.onSubmit=function(e){e.preventDefault();var n=t.state,a=n.days,r=n.selected,o="NUMBER_OF_DAYS"===r?a:void 0;r&&(t.setState({saving:!0,success:!1}),Object(Ge.d)({type:r,value:o}).then(function(){t.setState({saving:!1,currentSetting:r,currentSettingValue:o||void 0,success:!0})},function(){t.setState({saving:!1})}))},t}return We(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchNewCodePeriodSetting()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.fetchNewCodePeriodSetting=function(){var e=this;Object(Ge.a)().then(function(t){var n=t.type,a=t.value,r=n||"PREVIOUS_VERSION";e.setState(function(e){var t=e.days;return{currentSetting:r,days:"NUMBER_OF_DAYS"===r?String(a):t,loading:!1,currentSettingValue:a,selected:r}})}).catch(function(){e.setState({loading:!1})})},t.prototype.render=function(){var e=this.state,t=e.currentSetting,n=e.days,a=e.loading,r=e.currentSettingValue,i=e.saving,s=e.selected,c=e.success,u=s!==t||"NUMBER_OF_DAYS"===s&&String(n)!==r,p="NUMBER_OF_DAYS"!==s||Object(He.b)(n);return o.createElement("ul",{className:"settings-sub-categories-list"},o.createElement("li",null,o.createElement("ul",{className:"settings-definitions-list"},o.createElement("li",null,o.createElement("div",{className:"settings-definition"},o.createElement("div",{className:"settings-definition-left"},o.createElement("h3",{className:"settings-definition-name",title:Object(l.translate)("settings.new_code_period.title")},Object(l.translate)("settings.new_code_period.title")),o.createElement("div",{className:"small big-spacer-top"},o.createElement(Me.FormattedMessage,{defaultMessage:Object(l.translate)("settings.new_code_period.description"),id:"settings.new_code_period.description",values:{link:o.createElement(O.Link,{to:"/documentation/project-administration/new-code-period/"},Object(l.translate)("learn_more"))}}),o.createElement("p",{className:"spacer-top"},Object(l.translate)("settings.new_code_period.description2")))),o.createElement("div",{className:"settings-definition-right"},a?o.createElement(Ne.a,null):o.createElement("form",{onSubmit:this.onSubmit},o.createElement(qe.a,{isDefault:!0,onSelect:this.onSelectSetting,selected:"PREVIOUS_VERSION"===s}),o.createElement(ze.a,{className:"spacer-top",days:n,isChanged:u,isValid:p,onChangeDays:this.onSelectDays,onSelect:this.onSelectSetting,selected:"NUMBER_OF_DAYS"===s}),u&&o.createElement("div",{className:"big-spacer-top"},o.createElement("p",{className:"spacer-bottom"},Object(l.translate)("baseline.next_analysis_notice")),o.createElement(Ne.a,{className:"spacer-right",loading:i}),o.createElement(T.SubmitButton,{disabled:i||!p},Object(l.translate)("save")),o.createElement(T.ResetButtonLink,{className:"spacer-left",onClick:this.onCancel},Object(l.translate)("cancel"))),!i&&!a&&c&&o.createElement("div",{className:"big-spacer-top"},o.createElement("span",{className:"text-success"},o.createElement(B.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved"))))))))))},t}(o.PureComponent),Ze=n(651);function Je(e){return Object(d.getJSON)("/api/alm_settings/list",{project:e}).then(function(e){return e.almSettings}).catch(Ze.a)}!function(e){e.AZURE="azure",e.BITBUCKET="bitbucket",e.GITHUB="github",e.GITLAB="gitlab"}(Re||(Re={}));var Xe=n(1392),Qe=n.n(Xe),$e=n(653),et=n(659),tt=n.n(et);function nt(e){var t=e.alm,n=e.children,a=e.originalKey,r=Object(l.translate)("settings",t===Re.GITLAB?"mr_decoration":"pr_decoration","form.header",a?"edit":"create");return o.createElement(tt.a,{header:r,onClose:e.onCancel,onSubmit:e.onSubmit,size:"medium"},function(t){var a=t.onCloseClick,i=t.onFormSubmit,s=t.submitting;return o.createElement("form",{className:"views-form",onSubmit:i},o.createElement("div",{className:"modal-head"},o.createElement("h2",null,r)),o.createElement("div",{className:"modal-body modal-container"},n),o.createElement("div",{className:"modal-foot"},o.createElement(Ne.a,{className:"spacer-right",loading:s}),o.createElement(T.SubmitButton,{disabled:s||!e.canSubmit()},Object(l.translate)("settings.pr_decoration.form.save")),o.createElement(T.ResetButtonLink,{onClick:a},Object(l.translate)("cancel"))))})}var at=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),rt=function(){return(rt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ot=function(e){function t(t){var n=e.call(this,t)||this;return n.handleFieldChange=function(e,t){n.setState(function(n){var a,r=n.formData;return{formData:rt(rt({},r),(a={},a[e]=t,a))}})},n.handleFormSubmit=function(){n.props.onSubmit(n.state.formData,n.props.bindingDefinition.key)},n.canSubmit=function(){return Object.values(n.state.formData).reduce(function(e,t){return e&&t.length>0},!0)},n.state={formData:t.bindingDefinition},n}return at(t,e),t.prototype.render=function(){var e=this.props,t=e.alm,n=e.children,a=e.bindingDefinition,r=this.state.formData;return o.createElement(nt,{alm:t,canSubmit:this.canSubmit,onCancel:this.props.onCancel,onSubmit:this.handleFormSubmit,originalKey:a.key},n({formData:r,onFieldChange:this.handleFieldChange}))},t}(o.PureComponent),it=n(1455),st=n.n(it);function ct(e){var t=e.additionalColumnsHeaders,n=e.alm,a=e.definitions;return o.createElement("table",{className:"data zebra fixed spacer-bottom"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,Object(l.translate)("settings.pr_decoration.table.column.name")),t.map(function(e){return o.createElement("th",{key:e},e)}),o.createElement("th",{className:"action-small text-center"},Object(l.translate)("settings.pr_decoration.table.column.edit")),o.createElement("th",{className:"action text-center"},Object(l.translate)("settings.pr_decoration.table.column.delete")))),o.createElement("tbody",null,0===a.length?o.createElement("tr",{"data-test":"settings__alm-empty-table"},o.createElement("td",{colSpan:3+t.length},Object(l.translate)("settings.pr_decoration.table.empty",n))):a.map(function(t){var n=t.key,a=t.additionalColumns;return o.createElement("tr",{"data-test":"settings__alm-table-row",key:n},o.createElement("td",{className:"nowrap hide-overflow",title:n},n),a.map(function(e){return o.createElement("td",{className:"nowrap hide-overflow",key:e,title:e},e)}),o.createElement("td",{className:"text-center","data-test":"settings__alm-table-row-edit"},o.createElement(T.ButtonIcon,{onClick:function(){return e.onEdit(n)}},o.createElement(st.a,null))),o.createElement("td",{className:"text-center","data-test":"settings__alm-table-row-delete"},o.createElement(T.DeleteButton,{onClick:function(){return e.onDelete(n)}})))})))}var lt=n(652),ut=n.n(lt);function pt(e){var t=e.autoFocus,n=e.help,a=e.id,r=e.isTextArea,i=e.maxLength,s=e.onFieldChange,c=e.propKey,u=e.value;return o.createElement("div",{className:"modal-field"},o.createElement("label",{className:"display-flex-center",htmlFor:a},Object(l.translate)("settings.pr_decoration.form",a),o.createElement("em",{className:"mandatory spacer-right"},"*"),n&&o.createElement(ut.a,{overlay:n,placement:"right"})),r?o.createElement("textarea",{className:"settings-large-input",id:a,maxLength:i||2e3,onChange:function(e){return s(c,e.currentTarget.value)},required:!0,rows:5,value:u}):o.createElement("input",{autoFocus:t,className:"input-super-large",id:a,maxLength:i||100,name:a,onChange:function(e){return s(c,e.currentTarget.value)},size:50,type:"text",value:u}))}function dt(e){var t=e.formData,n=e.onFieldChange;return o.createElement(o.Fragment,null,o.createElement(pt,{autoFocus:!0,help:Object(l.translate)("settings.pr_decoration.form.name.azure.help"),id:"name.azure",onFieldChange:n,propKey:"key",value:t.key}),o.createElement(pt,{help:Object(l.translate)("settings.pr_decoration.form.personal_access_token.azure.help"),id:"personal_access_token",isTextArea:!0,onFieldChange:n,propKey:"personalAccessToken",value:t.personalAccessToken}))}var mt=n(772);var ft=Object(mt.a)(function(e){var t=e.alm,n=e.appState.multipleAlmEnabled,a=e.definitionCount,r=n||0===a;return o.createElement(o.Fragment,null,o.createElement(Se.Alert,{className:"spacer-top huge-spacer-bottom",variant:"info"},o.createElement(Me.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration."+t+".info"),id:"settings.pr_decoration."+t+".info",values:{link:o.createElement(O.Link,{target:"_blank",to:"/documentation/analysis/pr-decoration/"},Object(l.translate)("learn_more"))}})),o.createElement("div",{className:"big-spacer-bottom display-flex-space-between"},o.createElement("h4",{className:"display-inline"},Object(l.translate)("settings",t===Re.GITLAB?"mr_decoration":"pr_decoration","table.title")),r&&o.createElement(T.Button,{"data-test":"settings__alm-create",onClick:e.onCreate},Object(l.translate)("settings.pr_decoration.table.create"))))}),gt=function(){return(gt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ht(e){var t=e.definitions,n=e.editedDefinition,a=e.loading;return o.createElement(o.Fragment,null,o.createElement(ft,{alm:Re.AZURE,definitionCount:t.length,onCreate:e.onCreate}),o.createElement(Ne.a,{loading:a},o.createElement(ct,{additionalColumnsHeaders:[],alm:Re.AZURE,definitions:t.map(function(e){return{key:e.key,additionalColumns:[]}}),onDelete:e.onDelete,onEdit:e.onEdit})),n&&o.createElement(ot,{alm:Re.AZURE,bindingDefinition:n,onCancel:e.onCancel,onSubmit:e.onSubmit},function(e){return o.createElement(dt,gt({},e))}))}var bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),yt=function(){return(yt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={},t.handleCancel=function(){t.setState({editedDefinition:void 0})},t.handleCreate=function(){t.setState({editedDefinition:{key:"",personalAccessToken:""}})},t.handleEdit=function(e){var n=t.props.definitions.find(function(t){return t.key===e});t.setState({editedDefinition:n})},t.handleSubmit=function(e,n){var a;return(n?(a=yt(yt({newKey:e.key},e),{key:n}),Object(d.post)("/api/alm_settings/update_azure",a).catch(Ze.a)):function(e){return Object(d.post)("/api/alm_settings/create_azure",e).catch(Ze.a)}(e)).then(t.props.onUpdateDefinitions).then(function(){t.mounted&&t.setState({editedDefinition:void 0})})},t}return bt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.definitions,n=e.loading,a=this.state.editedDefinition;return o.createElement(ht,{definitions:t,editedDefinition:a,loading:n,onCancel:this.handleCancel,onCreate:this.handleCreate,onDelete:this.props.onDelete,onEdit:this.handleEdit,onSubmit:this.handleSubmit})},t}(o.PureComponent);function Et(e){var t=e.formData,n=e.onFieldChange;return o.createElement(o.Fragment,null,o.createElement(pt,{autoFocus:!0,help:Object(l.translate)("settings.pr_decoration.form.name.bitbucket.help"),id:"name.bitbucket",maxLength:100,onFieldChange:n,propKey:"key",value:t.key}),o.createElement(pt,{help:o.createElement(Me.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration.form.url.bitbucket.help"),id:"settings.pr_decoration.form.url.bitbucket.help",values:{example:"https://bitbucket-server.your-company.com"}}),id:"url.bitbucket",maxLength:2e3,onFieldChange:n,propKey:"url",value:t.url}),o.createElement(pt,{id:"personal_access_token",isTextArea:!0,onFieldChange:n,propKey:"personalAccessToken",value:t.personalAccessToken}))}var _t=function(){return(_t=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Ot(e){var t=e.definitions,n=e.editedDefinition,a=e.loading;return o.createElement(o.Fragment,null,o.createElement(ft,{alm:Re.BITBUCKET,definitionCount:t.length,onCreate:e.onCreate}),o.createElement(Ne.a,{loading:a},o.createElement(ct,{additionalColumnsHeaders:[Object(l.translate)("settings.pr_decoration.table.column.bitbucket.url")],alm:Re.BITBUCKET,definitions:t.map(function(e){return{key:e.key,additionalColumns:[e.url]}}),onDelete:e.onDelete,onEdit:e.onEdit})),n&&o.createElement(ot,{alm:Re.BITBUCKET,bindingDefinition:n,onCancel:e.onCancel,onSubmit:e.onSubmit},function(e){return o.createElement(Et,_t({},e))}))}var jt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ct=function(){return(Ct=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},St=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={},t.handleCancel=function(){t.setState({editedDefinition:void 0})},t.handleCreate=function(){t.setState({editedDefinition:{key:"",url:"",personalAccessToken:""}})},t.handleEdit=function(e){var n=t.props.definitions.find(function(t){return t.key===e});t.setState({editedDefinition:n})},t.handleSubmit=function(e,n){var a;return(n?(a=Ct(Ct({newKey:e.key},e),{key:n}),Object(d.post)("/api/alm_settings/update_bitbucket",a).catch(Ze.a)):function(e){return Object(d.post)("/api/alm_settings/create_bitbucket",e).catch(Ze.a)}(e)).then(function(){t.mounted&&t.setState({editedDefinition:void 0})}).then(t.props.onUpdateDefinitions)},t}return jt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.definitions,n=e.loading,a=this.state.editedDefinition;return o.createElement(Ot,{definitions:t,editedDefinition:a,loading:n,onCancel:this.handleCancel,onCreate:this.handleCreate,onDelete:this.props.onDelete,onEdit:this.handleEdit,onSubmit:this.handleSubmit})},t}(o.PureComponent),kt=n(670),Nt=n.n(kt);function wt(e){var t=e.id,n=e.onDelete,a=e.onCancel,r=e.projectCount;return o.createElement(Nt.a,{confirmButtonText:Object(l.translate)("delete"),confirmData:t,header:Object(l.translate)("settings.pr_decoration.delete.header"),isDestructive:!0,onClose:a,onConfirm:n},o.createElement(o.Fragment,null,o.createElement("p",{className:"spacer-bottom"},o.createElement(Me.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration.delete.message"),id:"settings.pr_decoration.delete.message",values:{id:o.createElement("b",null,t)}})),function(e){return void 0===e?o.createElement("p",null,Object(l.translate)("settings.pr_decoration.delete.no_info")):e?o.createElement("p",null,Object(l.translateWithParameters)("settings.pr_decoration.delete.info",e)," "):null}(r)))}function Dt(e){var t=e.formData,n=e.onFieldChange;return o.createElement(o.Fragment,null,o.createElement(pt,{autoFocus:!0,help:Object(l.translate)("settings.pr_decoration.form.name.github.help"),id:"name.github",onFieldChange:n,propKey:"key",value:t.key}),o.createElement(pt,{help:o.createElement(o.Fragment,null,Object(l.translate)("settings.pr_decoration.form.url.github.help1"),o.createElement("br",null),o.createElement("em",null,"https://github.company.com/api/v3"),o.createElement("br",null),o.createElement("br",null),Object(l.translate)("settings.pr_decoration.form.url.github.help2"),o.createElement("br",null),o.createElement("em",null,"https://api.github.com/")),id:"url.github",maxLength:2e3,onFieldChange:n,propKey:"url",value:t.url}),o.createElement(pt,{id:"app_id",maxLength:80,onFieldChange:n,propKey:"appId",value:t.appId}),o.createElement(pt,{id:"private_key",isTextArea:!0,onFieldChange:n,propKey:"privateKey",value:t.privateKey}))}var Pt=function(){return(Pt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function xt(e){var t=e.definitions,n=e.editedDefinition,a=e.loading;return o.createElement(o.Fragment,null,o.createElement(ft,{alm:Re.GITHUB,definitionCount:t.length,onCreate:e.onCreate}),o.createElement(Ne.a,{loading:a},o.createElement(ct,{additionalColumnsHeaders:[Object(l.translate)("settings.pr_decoration.table.column.github.url"),Object(l.translate)("settings.pr_decoration.table.column.app_id")],alm:Re.GITHUB,definitions:t.map(function(e){var t=e.key,n=e.appId;return{key:t,additionalColumns:[e.url,n]}}),onDelete:e.onDelete,onEdit:e.onEdit})),n&&o.createElement(ot,{alm:Re.GITHUB,bindingDefinition:n,onCancel:e.onCancel,onSubmit:e.onSubmit},function(e){return o.createElement(Dt,Pt({},e))}))}var At=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ft=function(){return(Ft=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={},t.handleCancel=function(){t.setState({editedDefinition:void 0})},t.handleCreate=function(){t.setState({editedDefinition:{key:"",appId:"",url:"",privateKey:""}})},t.handleEdit=function(e){var n=t.props.definitions.find(function(t){return t.key===e});t.setState({editedDefinition:n})},t.handleSubmit=function(e,n){var a;return(n?(a=Ft(Ft({newKey:e.key},e),{key:n}),Object(d.post)("/api/alm_settings/update_github",a).catch(Ze.a)):function(e){return Object(d.post)("/api/alm_settings/create_github",e).catch(Ze.a)}(e)).then(function(){t.mounted&&t.setState({editedDefinition:void 0})}).then(t.props.onUpdateDefinitions)},t}return At(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.definitions,n=e.loading,a=this.state.editedDefinition;return o.createElement(xt,{definitions:t,editedDefinition:a,loading:n,onCancel:this.handleCancel,onCreate:this.handleCreate,onDelete:this.props.onDelete,onEdit:this.handleEdit,onSubmit:this.handleSubmit})},t}(o.PureComponent);var Tt=o.memo(function(e){var t=e.formData,n=e.onFieldChange;return o.createElement(o.Fragment,null,o.createElement(pt,{autoFocus:!0,help:Object(l.translate)("settings.pr_decoration.form.name.gitlab.help"),id:"name.gitlab",onFieldChange:n,propKey:"key",value:t.key}),o.createElement(pt,{help:Object(l.translate)("settings.pr_decoration.form.personal_access_token.gitlab.help"),id:"personal_access_token",isTextArea:!0,onFieldChange:n,propKey:"personalAccessToken",value:t.personalAccessToken}))}),It=function(){return(It=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Ut(e){var t=e.definitions,n=e.editedDefinition,a=e.loading;return o.createElement(o.Fragment,null,o.createElement(ft,{alm:Re.GITLAB,definitionCount:t.length,onCreate:e.onCreate}),o.createElement(Ne.a,{loading:a},o.createElement(ct,{additionalColumnsHeaders:[],alm:Re.GITLAB,definitions:t.map(function(e){return{key:e.key,additionalColumns:[]}}),onDelete:e.onDelete,onEdit:e.onEdit})),n&&o.createElement(ot,{alm:Re.GITLAB,bindingDefinition:n,onCancel:e.onCancel,onSubmit:e.onSubmit},function(e){return o.createElement(Tt,It({},e))}))}var Vt,Lt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Rt=function(){return(Rt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={},t.handleEdit=function(e){var n=t.props.definitions.find(function(t){return t.key===e});t.setState({editedDefinition:n})},t.handleSubmit=function(e,n){var a;return(n?(a=Rt(Rt({newKey:e.key},e),{key:n}),Object(d.post)("/api/alm_settings/update_gitlab",a).catch(Ze.a)):function(e){return Object(d.post)("/api/alm_settings/create_gitlab",e).catch(Ze.a)}(e)).then(t.props.onUpdateDefinitions).then(function(){t.mounted&&t.setState({editedDefinition:void 0})})},t.handleCancel=function(){t.setState({editedDefinition:void 0})},t.handleCreate=function(){t.setState({editedDefinition:{key:"",personalAccessToken:""}})},t}return Lt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.definitions,n=e.loading,a=this.state.editedDefinition;return o.createElement(Ut,{definitions:t,editedDefinition:a,loading:n,onCancel:this.handleCancel,onCreate:this.handleCreate,onDelete:this.props.onDelete,onEdit:this.handleEdit,onSubmit:this.handleSubmit})},t}(o.PureComponent),Mt=((Vt={})[Re.AZURE]="Azure DevOps Server",Vt[Re.BITBUCKET]="Bitbucket Server",Vt[Re.GITHUB]="GitHub",Vt[Re.GITLAB]="GitLab",Vt);function Gt(e){var t=e.definitionKeyForDeletion,n=e.definitions,a=e.currentAlm,r=e.loading,i=e.projectCount;return o.createElement(o.Fragment,null,o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},Object(l.translate)("settings.pr_decoration.title"))),o.createElement("div",{className:"markdown small spacer-top big-spacer-bottom"},Object(l.translate)("settings.pr_decoration.description")),o.createElement(Qe.a,{onSelect:e.onSelectAlm,selected:a,tabs:[{key:Re.GITHUB,label:o.createElement(o.Fragment,null,o.createElement("img",{alt:"github",className:"spacer-right",height:16,src:Object($e.getBaseUrl)()+"/images/alm/github.svg"}),Mt[Re.GITHUB])},{key:Re.BITBUCKET,label:o.createElement(o.Fragment,null,o.createElement("img",{alt:"bitbucket",className:"spacer-right",height:16,src:Object($e.getBaseUrl)()+"/images/alm/bitbucket.svg"}),Mt[Re.BITBUCKET])},{key:Re.AZURE,label:o.createElement(o.Fragment,null,o.createElement("img",{alt:"azure",className:"spacer-right",height:16,src:Object($e.getBaseUrl)()+"/images/alm/azure.svg"}),Mt[Re.AZURE])},{key:Re.GITLAB,label:o.createElement(o.Fragment,null,o.createElement("img",{alt:"gitlab",className:"spacer-right",height:16,src:Object($e.getBaseUrl)()+"/images/alm/gitlab.svg"}),Mt[Re.GITLAB])}]}),o.createElement("div",{className:"boxed-group boxed-group-inner"},a===Re.AZURE&&o.createElement(vt,{definitions:n.azure,loading:r,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),a===Re.BITBUCKET&&o.createElement(St,{definitions:n.bitbucket,loading:r,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),a===Re.GITHUB&&o.createElement(Bt,{definitions:n.github,loading:r,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),a===Re.GITLAB&&o.createElement(Kt,{definitions:n.gitlab,loading:r,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions})),t&&o.createElement(wt,{id:t,onCancel:e.onCancel,onDelete:e.onConfirmDelete,projectCount:i}))}var zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),qt=function(){return(qt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ht=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.mounted=!1,n.state={currentAlm:Re.GITHUB,definitions:(t={},t[Re.AZURE]=[],t[Re.BITBUCKET]=[],t[Re.GITHUB]=[],t[Re.GITLAB]=[],t),loading:!0},n.deleteConfiguration=function(e){return(t=e,Object(d.post)("/api/alm_settings/delete",{key:t}).catch(Ze.a)).then(function(){n.mounted&&n.setState({definitionKeyForDeletion:void 0,projectCount:void 0})}).then(n.fetchPullRequestDecorationSetting);var t},n.fetchPullRequestDecorationSetting=function(){return n.setState({loading:!0}),Object(d.getJSON)("/api/alm_settings/list_definitions").catch(Ze.a).then(function(e){n.mounted&&n.setState({definitions:e,loading:!1})}).catch(function(){n.mounted&&n.setState({loading:!1})})},n.handleSelectAlm=function(e){n.setState({currentAlm:e})},n.handleCancel=function(){n.setState({definitionKeyForDeletion:void 0,projectCount:void 0})},n.handleDelete=function(e){return(t=e,Object(d.getJSON)("/api/alm_settings/count_binding",{almSetting:t}).then(function(e){return e.projects}).catch(Ze.a)).then(function(t){n.mounted&&n.setState({definitionKeyForDeletion:e,projectCount:t})});var t},n}return zt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchPullRequestDecorationSetting()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return o.createElement(Gt,qt({onCancel:this.handleCancel,onConfirmDelete:this.deleteConfiguration,onDelete:this.handleDelete,onSelectAlm:this.handleSelectAlm,onUpdateDefinitions:this.fetchPullRequestDecorationSetting},this.state))},t}(o.PureComponent);function Wt(e){return e.url?o.createElement(o.Fragment,null,o.createElement("span",null,e.key," â "),o.createElement("span",{className:"text-muted"},e.url)):o.createElement("span",null,e.key)}function Yt(e){var t=e.help,n=e.helpParams,a=e.id,r=e.propKey,i=e.value,s=e.onFieldChange;return o.createElement("div",{className:"form-field"},o.createElement("label",{className:"display-flex-center",htmlFor:a},Object(l.translate)("settings.pr_decoration.binding.form",a),o.createElement("em",{className:"mandatory spacer-right"},"*"),t&&o.createElement(ut.a,{overlay:o.createElement(Me.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration.binding.form",a,"help"),id:"settings.pr_decoration.binding.form."+a+".help",values:n}),placement:"right"})),o.createElement("input",{className:"input-super-large",id:a,maxLength:256,name:a,onChange:function(e){return s(r,e.currentTarget.value)},type:"text",value:i}))}function Zt(e){var t=e.formData,n=t.key,a=t.repository,r=t.slug,i=e.instances,s=e.isValid,c=e.loading,u=e.originalData,p=e.saving,d=e.success;if(c)return o.createElement(Ne.a,null);if(i.length<1)return o.createElement("div",null,o.createElement(Se.Alert,{className:"spacer-top huge-spacer-bottom",variant:"info"},o.createElement(Me.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration.binding.no_bindings"),id:"settings.pr_decoration.binding.no_bindings",values:{link:o.createElement(O.Link,{to:"/documentation/analysis/pull-request/#pr-decoration"},Object(l.translate)("learn_more"))}})));var m=n&&i.find(function(e){return e.key===n}),f=m&&m.alm,g=!function(e,t){var n=e.key,a=e.repository,r=void 0===a?"":a,o=e.slug,i=void 0===o?"":o,s=t.key,c=void 0===s?"":s,l=t.repository,u=void 0===l?"":l,p=t.slug;return n===c&&r===u&&i===(void 0===p?"":p)}({key:n,repository:a,slug:r},u||{key:""});return o.createElement("div",null,o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},Object(l.translate)("settings.pr_decoration.binding.title"))),o.createElement("div",{className:"markdown small spacer-top big-spacer-bottom"},Object(l.translate)("settings.pr_decoration.binding.description")),o.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},o.createElement("div",{className:"form-field"},o.createElement("label",{htmlFor:"name"},Object(l.translate)("settings.pr_decoration.binding.form.name"),o.createElement("em",{className:"mandatory spacer-right"},"*")),o.createElement(Q.a,{autosize:!0,className:"abs-width-400",clearable:!1,id:"name",menuContainerStyle:{maxWidth:"210%",width:"auto"},onChange:function(t){return e.onFieldChange("key",t.key)},optionRenderer:Wt,options:i,searchable:!1,value:n,valueKey:"key",valueRenderer:Wt})),f===Re.BITBUCKET&&o.createElement(o.Fragment,null,Yt({help:!0,helpParams:{example:o.createElement(o.Fragment,null,".../projects/",o.createElement("strong",null,"{KEY}"),"/repos/{SLUG}/browse")},id:"bitbucket.repository",onFieldChange:e.onFieldChange,propKey:"repository",value:a||""}),Yt({help:!0,helpParams:{example:o.createElement(o.Fragment,null,".../projects/{KEY}/repos/",o.createElement("strong",null,"{SLUG}"),"/browse")},id:"bitbucket.slug",onFieldChange:e.onFieldChange,propKey:"slug",value:r||""})),f===Re.GITHUB&&Yt({help:!0,helpParams:{example:"SonarSource/sonarqube"},id:"github.repository",onFieldChange:e.onFieldChange,propKey:"repository",value:a||""}),o.createElement("div",{className:"display-flex-center"},o.createElement(Ne.a,{className:"spacer-right",loading:p}),g&&o.createElement(T.SubmitButton,{className:"spacer-right button-success",disabled:p||!s},o.createElement("span",{"data-test":"project-settings__alm-save"},Object(l.translate)("save"))),u&&o.createElement(T.Button,{className:"spacer-right",onClick:e.onReset},o.createElement("span",{"data-test":"project-settings__alm-reset"},Object(l.translate)("reset_verb"))),!p&&d&&o.createElement("span",{className:"text-success"},o.createElement(B.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved")))))}var Jt,Xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Qt=function(){return(Qt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},$t=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},en=((Jt={})[Re.AZURE]=[],Jt[Re.BITBUCKET]=["repository","slug"],Jt[Re.GITHUB]=["repository"],Jt[Re.GITLAB]=[],Jt),tn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={formData:{key:""},instances:[],isValid:!1,loading:!0,saving:!1,success:!1},t.fetchDefinitions=function(){var e=t.props.component.key;return Promise.all([Je(e),t.getProjectBinding(e)]).then(function(e){var n=e[0],a=e[1];t.mounted&&t.setState(function(e){var r=e.formData,o=a||r;return{formData:o,instances:n,isValid:t.validateForm(o),loading:!1,originalData:a}})}).catch(function(){t.mounted&&t.setState({loading:!1})})},t.catchError=function(){t.mounted&&t.setState({saving:!1})},t.handleReset=function(){var e,n=t.props.component;t.setState({saving:!0}),(e=n.key,Object(d.post)("/api/alm_settings/delete_binding",{project:e}).catch(Ze.a)).then(function(){t.mounted&&t.setState({formData:{key:"",repository:"",slug:""},originalData:void 0,saving:!1,success:!0})}).catch(t.catchError)},t.handleSubmit=function(){t.setState({saving:!0});var e=t.state,n=e.formData,a=n.key,r=$t(n,["key"]),o=e.instances.find(function(e){return e.key===a});a&&o&&a&&t.submitProjectAlmBinding(o.alm,a,r).then(function(){t.mounted&&t.setState({saving:!1,success:!0})}).then(t.fetchDefinitions).catch(t.catchError)},t.handleFieldChange=function(e,n){t.setState(function(a){var r,o=a.formData,i=Qt(Qt({},o),((r={})[e]=n,r));return{formData:i,isValid:t.validateForm(i),success:!1}})},t.validateForm=function(e){var n=e.key,a=$t(e,["key"]),r=t.state.instances.find(function(e){return e.key===n});return!(!n||!r)&&en[r.alm].reduce(function(e,t){return e&&Boolean(a[t])},!0)},t}return Xt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchDefinitions()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.getProjectBinding=function(e){return function(e){return Object(d.getJSON)("/api/alm_settings/get_binding",{project:e})}(e).catch(function(e){return e&&404===e.status?Promise.resolve(void 0):Object(Ze.a)(e)})},t.prototype.submitProjectAlmBinding=function(e,t,n){var a,r=t,o=this.props.component.key;switch(e){case Re.AZURE:return a={almSetting:r,project:o},Object(d.post)("/api/alm_settings/set_azure_binding",a).catch(Ze.a);case Re.BITBUCKET:if(!n)return Promise.reject();var i=n.repository,s=void 0===i?"":i,c=n.slug;return function(e){return Object(d.post)("/api/alm_settings/set_bitbucket_binding",e).catch(Ze.a)}({almSetting:r,project:o,repository:s,slug:void 0===c?"":c});case Re.GITHUB:return(s=n&&n.repository)?function(e){return Object(d.post)("/api/alm_settings/set_github_binding",e).catch(Ze.a)}({almSetting:r,project:o,repository:s}):Promise.reject();case Re.GITLAB:return function(e){return Object(d.post)("/api/alm_settings/set_gitlab_binding",e).catch(Ze.a)}({almSetting:r,project:o});default:return Promise.reject()}},t.prototype.render=function(){return o.createElement(Zt,Qt({onFieldChange:this.handleFieldChange,onReset:this.handleReset,onSubmit:this.handleSubmit},this.state))},t}(o.PureComponent),nn=function(){return(nn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},an=[{key:_,name:Object(l.translate)("property.category.languages"),renderComponent:function(e){return o.createElement(Ke,nn({},e))},availableGlobally:!0,availableForProject:!0,displayTab:!0},{key:"new_code_period",name:Object(l.translate)("settings.new_code_period.category"),renderComponent:function(){return o.createElement(Ye,null)},availableGlobally:!0,availableForProject:!1,displayTab:!0},{key:"exclusions",name:Object(l.translate)("property.category.exclusions"),renderComponent:function(e){return o.createElement(Ie,nn({},e))},availableGlobally:!0,availableForProject:!0,displayTab:!1},{key:"pull_request_decoration",name:Object(l.translate)("settings.pr_decoration.category"),renderComponent:function(){return o.createElement(Ht,null)},availableGlobally:!0,availableForProject:!1,displayTab:!0,requiresBranchesEnabled:!0},{key:"pull_request_decoration_binding",name:Object(l.translate)("settings.pr_decoration.binding.category"),renderComponent:function(e){return e.component&&o.createElement(tn,{component:e.component})},availableGlobally:!1,availableForProject:!0,displayTab:!0,requiresBranchesEnabled:!0}];var rn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),on=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rn(t,e),t.prototype.renderLink=function(e){var t=this.props,n=t.component,a=t.defaultCategory,r=t.selectedCategory,i=this.props.component?"/project/settings":"/settings",s={category:e.key!==a?e.key.toLowerCase():void 0,id:n&&n.key};return o.createElement(O.IndexLink,{className:D({active:e.key.toLowerCase()===r.toLowerCase()}),title:e.name,to:{pathname:i,query:s}},e.name)},t.prototype.render=function(){var e=this,t=this.props.branchesEnabled,n=this.props.categories.filter(function(e){return!Ve[e.toLowerCase()]}).map(function(e){return{key:e,name:Object(g.b)(e)}}).concat(an.filter(function(e){return e.displayTab}).filter(function(t){return e.props.component?t.availableForProject:t.availableGlobally}).filter(function(e){return t||!e.requiresBranchesEnabled})),a=C()(n,function(e){return e.name.toLowerCase()});return o.createElement("ul",{className:"side-tabs-menu"},a.map(function(t){return o.createElement("li",{key:t.key},e.renderLink(t))}))},t}(o.PureComponent),sn=Object(c.connect)(function(e){return{categories:Object(p.getSettingsAppAllCategories)(e),branchesEnabled:Object(p.getAppState)(e).branchesEnabled}})(on),cn=n(721);function ln(e){var t=e.component,n=t?Object(l.translate)("project_settings.page"):Object(l.translate)("settings.page"),a=t?Object(l.translate)("project_settings.page.description"):o.createElement(cn.a,{message:Object(l.translate)("settings.page.description")});return o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},n),o.createElement("div",{className:"page-description"},a))}n.d(t,"App",function(){return pn});var un=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),pn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.fetchSettings=function(){var e=t.props.component;t.props.fetchSettings(e&&e.key).then(t.stopLoading,t.stopLoading)},t.stopLoading=function(){t.mounted&&t.setState({loading:!1})},t}return un(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchSettings()},t.prototype.componentDidUpdate=function(e){e.component!==this.props.component&&this.fetchSettings()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){if(this.state.loading)return null;var e=this.props.location.query.category||this.props.defaultCategory,t=Ve[e.toLowerCase()]||e,n=r()(an,function(e){return e.key===t}),a=this.props.component,i=n&&(a&&n.availableForProject||!a&&n.availableGlobally);return o.createElement("div",{className:"page page-limited",id:"settings-page"},o.createElement(u.a,{suggestions:"settings"}),o.createElement(s.a,{title:Object(l.translate)("settings.page")}),o.createElement(ln,{component:this.props.component}),o.createElement("div",{className:"side-tabs-layout settings-layout"},o.createElement("div",{className:"side-tabs-side"},o.createElement(sn,{component:this.props.component,defaultCategory:this.props.defaultCategory,selectedCategory:t})),o.createElement("div",{className:"side-tabs-main"},n&&i?n.renderComponent({component:this.props.component,selectedCategory:e}):o.createElement(Te,{category:t,component:this.props.component}))))},t}(o.PureComponent),dn={fetchSettings:function(e){return function(t){return Object(m.d)(e).then(function(e){var n=e.filter(function(e){return"LICENSE"!==e.type});t(Object(h.f)(n))})}}};t.default=Object(c.connect)(function(e){return{defaultCategory:Object(p.getSettingsAppDefaultCategory)(e)}},dn)(pn)},662:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a,r=n(12),o=n(680),i=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function s(e){var t=e.suggestions;return r.createElement(o.a.Consumer,null,function(e){var n=e.addSuggestions,a=e.removeSuggestions;return r.createElement(c,{addSuggestions:n,removeSuggestions:a,suggestions:t})})}var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){this.props.addSuggestions(this.props.suggestions)},t.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))},t.prototype.componentWillUnmount=function(){this.props.removeSuggestions(this.props.suggestions)},t.prototype.render=function(){return null},t}(r.PureComponent)},772:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a,r=n(12),o=n(646),i=n(648),s=n(712),c=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){return(l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function u(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.render=function(){return r.createElement(e,l({},this.props))},n.displayName=Object(s.a)(e,"withAppState"),n}(r.Component);return Object(o.connect)(function(e){return{appState:Object(i.getAppState)(e)}})(t)}}}]);
//# sourceMappingURL=321.1576512032968.chunk.js.map