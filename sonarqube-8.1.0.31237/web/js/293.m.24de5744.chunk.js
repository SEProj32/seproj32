(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{1800:function(e,t,n){"use strict";n.r(t);var i=n(316),r=n(422),s=n(318),o=n(354),a=n.n(o),l=n(2),c=n(324),p=n.n(c),u=n(5),m=n(480),d=n(743),h=n(687),g=(n(740),n(348)),b=n.n(g),f=n(787),y=n(742),v=n(407);class C extends l.PureComponent{constructor(){super(...arguments),this.handleToggleUser=(e,t)=>{return e.permissions.includes(t)?this.props.revokePermissionFromUser(e.login,t):this.props.grantPermissionToUser(e.login,t)},this.handleToggleGroup=(e,t)=>{return e.permissions.includes(t)?this.props.revokePermissionFromGroup(e.name,t):this.props.grantPermissionToGroup(e.name,t)},this.handleSelectPermission=e=>{this.props.onPermissionSelect(e)}}render(){const e=this.props,t=e.filter,n=e.groups,i=e.groupsPaging,r=e.users,s=e.usersPaging;let o=v.a[this.props.component.qualifier];"public"===this.props.visibility&&(o=a()(o,"user","codeviewer"));const c=Object(v.e)(o,"projects_role");let p=0,u=0;return"users"!==t&&(p+=n.length,u+=i?i.total:n.length),"groups"!==t&&(p+=r.length,u+=s?s.total:r.length),l.createElement(l.Fragment,null,l.createElement(f.a,{filter:this.props.filter,groups:this.props.groups,onSelectPermission:this.handleSelectPermission,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:c,query:this.props.query,selectedPermission:this.props.selectedPermission,users:this.props.users},l.createElement(y.a,{filter:this.props.filter,onFilter:this.props.onFilterChange,onSearch:this.props.onQueryChange,query:this.props.query})),l.createElement(b.a,{count:p,loadMore:this.props.onLoadMore,total:u}))}}var O=n(310),j=n(961);class P extends l.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={applyTemplateModal:!1},this.handleApplyTemplate=()=>{this.setState({applyTemplateModal:!0})},this.handleApplyTemplateClose=()=>{this.mounted&&this.setState({applyTemplateModal:!1})}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props.component,t=e.configuration,n=null!=t&&t.canApplyPermissionTemplate,i=["VW","SVW","APP"].includes(e.qualifier)?Object(u.translate)("roles.page.description_portfolio"):Object(u.translate)("roles.page.description2"),r="TRK"===e.qualifier&&e.visibility?Object(u.translate)("visibility",e.visibility,"description",e.qualifier):void 0;return l.createElement("header",{className:"page-header"},l.createElement("h1",{className:"page-title"},Object(u.translate)("permissions.page")),this.props.loading&&l.createElement("i",{className:"spinner"}),n&&l.createElement("div",{className:"page-actions"},l.createElement(O.Button,{className:"js-apply-template",onClick:this.handleApplyTemplate},Object(u.translate)("projects_role.apply_template")),this.state.applyTemplateModal&&l.createElement(j.a,{onApply:this.props.loadHolders,onClose:this.handleApplyTemplateClose,organization:e.organization,project:e})),l.createElement("div",{className:"page-description"},l.createElement("p",null,i),r&&l.createElement("p",null,r)))}}var E=n(340),_=n.n(E),k=n(319);function S(e){let t=e.component,n=e.onClose,i=e.onConfirm;const r=t.qualifier;return l.createElement(_.a,{confirmButtonText:Object(u.translate)("projects_role.turn_project_to_public",r),header:Object(u.translateWithParameters)("projects_role.turn_x_to_public",t.name),onClose:n,onConfirm:i},l.createElement(k.Alert,{variant:"warning"},Object(u.translate)("projects_role.are_you_sure_to_turn_project_to_public.warning",r)),l.createElement("p",null,Object(u.translate)("projects_role.are_you_sure_to_turn_project_to_public",r)))}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){x(e,t,n[t])})}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}const w={fetchOrganization:r.f};t.default=Object(i.connect)((e,t)=>{let n=t.component;return{currentUser:Object(s.getCurrentUser)(e),organization:Object(s.getOrganizationByKey)(e,n.organization)}},w)(class extends l.PureComponent{constructor(e){super(e),this.mounted=!1,this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.loadUsersAndGroups=(e,t)=>{const n=this.props.component,i=this.state,r=i.filter,s=i.query,o=i.selectedPermission,a="groups"!==r?m.n({projectKey:n.key,q:s||void 0,permission:o,organization:n.organization,p:e}):Promise.resolve({paging:void 0,users:[]}),l="users"!==r?m.m({projectKey:n.key,q:s||void 0,permission:o,organization:n.organization,p:t}):Promise.resolve({paging:void 0,groups:[]});return Promise.all([a,l])},this.loadHolders=()=>(this.setState({loading:!0}),this.loadUsersAndGroups().then(e=>{let t=T(e,2),n=t[0],i=t[1];this.mounted&&this.setState({groups:i.groups,groupsPaging:i.paging,loading:!1,users:n.users,usersPaging:n.paging})},this.stopLoading)),this.onLoadMore=()=>{const e=this.state,t=e.usersPaging,n=e.groupsPaging;return this.setState({loading:!0}),this.loadUsersAndGroups(t?t.pageIndex+1:1,n?n.pageIndex+1:1).then(e=>{let t=T(e,2),n=t[0],i=t[1];this.mounted&&this.setState(e=>{let t=e.groups,r=e.users;return{groups:[...t,...i.groups],groupsPaging:i.paging,loading:!1,users:[...r,...n.users],usersPaging:n.paging}})},this.stopLoading)},this.handleFilterChange=e=>{this.mounted&&this.setState({filter:e},this.loadHolders)},this.handleQueryChange=e=>{this.mounted&&this.setState({query:e},this.loadHolders)},this.handlePermissionSelect=e=>{this.mounted&&this.setState(t=>({selectedPermission:t.selectedPermission===e?void 0:e}),this.loadHolders)},this.addPermissionToGroup=(e,t)=>this.state.groups.map(n=>n.name===e?N({},n,{permissions:[...n.permissions,t]}):n),this.addPermissionToUser=(e,t)=>this.state.users.map(n=>n.login===e?N({},n,{permissions:[...n.permissions,t]}):n),this.removePermissionFromGroup=(e,t)=>this.state.groups.map(n=>n.name===e?N({},n,{permissions:a()(n.permissions,t)}):n),this.removePermissionFromUser=(e,t)=>this.state.users.map(n=>n.login===e?N({},n,{permissions:a()(n.permissions,t)}):n),this.grantPermissionToGroup=(e,t)=>this.mounted?(this.setState({loading:!0,groups:this.addPermissionToGroup(e,t)}),m.o({projectKey:this.props.component.key,groupName:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,groups:this.removePermissionFromGroup(e,t)})})):Promise.resolve(),this.grantPermissionToUser=(e,t)=>this.mounted?(this.setState({loading:!0,users:this.addPermissionToUser(e,t)}),m.p({projectKey:this.props.component.key,login:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,users:this.removePermissionFromUser(e,t)})})):Promise.resolve(),this.revokePermissionFromGroup=(e,t)=>this.mounted?(this.setState({loading:!0,groups:this.removePermissionFromGroup(e,t)}),m.t({projectKey:this.props.component.key,groupName:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,groups:this.addPermissionToGroup(e,t)})})):Promise.resolve(),this.revokePermissionFromUser=(e,t)=>this.mounted?(this.setState({loading:!0,users:this.removePermissionFromUser(e,t)}),m.u({projectKey:this.props.component.key,login:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,users:this.addPermissionToUser(e,t)})})):Promise.resolve(),this.handleOrganizationUpgrade=()=>{const e=this.props,t=e.component,n=e.organization;n&&(this.props.onComponentChange({configuration:N({},t.configuration,{canUpdateProjectVisibilityToPrivate:!0})}),this.props.fetchOrganization(n.key))},this.handleVisibilityChange=e=>{"public"===e?this.openDisclaimer():this.turnProjectToPrivate()},this.turnProjectToPublic=()=>{this.props.onComponentChange({visibility:"public"}),m.e(this.props.component.key,"public").then(()=>{this.loadHolders()},()=>{this.props.onComponentChange({visibility:"private"})})},this.turnProjectToPrivate=()=>{this.props.onComponentChange({visibility:"private"}),m.e(this.props.component.key,"private").then(()=>{this.loadHolders()},()=>{this.props.onComponentChange({visibility:"public"})})},this.openDisclaimer=()=>{this.mounted&&this.setState({disclaimer:!0})},this.closeDisclaimer=()=>{this.mounted&&this.setState({disclaimer:!1})},this.state={disclaimer:!1,filter:"all",groups:[],loading:!0,query:"",users:[]}}componentDidMount(){this.mounted=!0,this.loadHolders()}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.component,n=e.organization,i=t.configuration&&t.configuration.canUpdateProjectVisibilityToPrivate;let r;return n&&!i&&(r=n.actions&&n.actions.admin&&"TRK"===this.props.component.qualifier&&!n.canUpdateProjectsVisibilityToPrivate),l.createElement("div",{className:"page page-limited",id:"project-permissions-page"},l.createElement(p.a,{title:Object(u.translate)("permissions.page")}),l.createElement(P,{component:t,loadHolders:this.loadHolders,loading:this.state.loading}),l.createElement("div",null,l.createElement(d.a,{canTurnToPrivate:i,className:"big-spacer-top big-spacer-bottom",onChange:this.handleVisibilityChange,visibility:t.visibility}),r&&n&&l.createElement(h.a,{className:"big-spacer-bottom",onOrganizationUpgrade:this.handleOrganizationUpgrade,organization:n}),this.state.disclaimer&&l.createElement(S,{component:t,onClose:this.closeDisclaimer,onConfirm:this.turnProjectToPublic})),l.createElement(C,{component:t,filter:this.state.filter,grantPermissionToGroup:this.grantPermissionToGroup,grantPermissionToUser:this.grantPermissionToUser,groups:this.state.groups,groupsPaging:this.state.groupsPaging,onFilterChange:this.handleFilterChange,onLoadMore:this.onLoadMore,onPermissionSelect:this.handlePermissionSelect,onQueryChange:this.handleQueryChange,query:this.state.query,revokePermissionFromGroup:this.revokePermissionFromGroup,revokePermissionFromUser:this.revokePermissionFromUser,selectedPermission:this.state.selectedPermission,users:this.state.users,usersPaging:this.state.usersPaging,visibility:t.visibility}))}})},329:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=n(326),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1},t.stopSubmitting=function(){t.mounted&&t.setState({submitting:!1})},t.handleCloseClick=function(e){e&&(e.preventDefault(),e.currentTarget.blur()),t.props.onClose()},t.handleFormSubmit=function(e){e.preventDefault(),t.submit()},t.handleSubmitClick=function(e){e&&(e.preventDefault(),e.currentTarget.blur()),t.submit()},t.submit=function(){var e=t.props.onSubmit();e&&(t.setState({submitting:!0}),e.then(t.stopSubmitting,t.stopSubmitting))},t}return r(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.header,i=e.onClose,r=(e.onSubmit,o(e,["children","header","onClose","onSubmit"]));return a.createElement(l.default,s({contentLabel:n,onRequestClose:i},r),t({onCloseClick:this.handleCloseClick,onFormSubmit:this.handleFormSubmit,onSubmitClick:this.handleSubmitClick,submitting:this.state.submitting}))},t}(a.Component);t.default=c},340:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(5),l=n(314),c=n(310),p=n(329),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.handleSubmit=function(){var e=t.props.onConfirm(t.props.confirmData);return e?e.then(t.props.onClose,function(){}):void t.props.onClose()},t.renderModalContent=function(e){var n=e.onCloseClick,i=e.onFormSubmit,r=e.submitting,s=t.props,p=s.children,u=s.confirmButtonText,m=s.confirmDisable,d=s.header,h=s.headerDescription,g=s.isDestructive,b=s.cancelButtonText,f=void 0===b?a.translate("cancel"):b;return o.createElement("form",{onSubmit:i},o.createElement("header",{className:"modal-head"},o.createElement("h2",null,d),h),o.createElement("div",{className:"modal-body"},p),o.createElement("footer",{className:"modal-foot"},o.createElement(l.default,{className:"spacer-right",loading:r}),o.createElement(c.SubmitButton,{autoFocus:!0,className:g?"button-red":void 0,disabled:r||m},u),o.createElement(c.ResetButtonLink,{disabled:r,onClick:n},f)))},t}return r(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t={header:e.header,onClose:e.onClose,noBackdrop:e.noBackdrop,size:e.size};return o.createElement(p.default,s({onSubmit:this.handleSubmit},t),this.renderModalContent)},t}(o.PureComponent);t.default=u},348:function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var r=n(309),s=n(2),o=n(5),a=n(317),l=n(314);t.default=function(e){var t,n=e.ready,c=void 0===n||n,p=i(e,["ready"]),u=p.total&&p.total>p.count,m=s.createElement("a",{className:"spacer-left","data-test":"show-more",href:"#",onClick:function(e){e.preventDefault(),e.currentTarget.blur(),p.loadMore&&p.loadMore()}},o.translate("show_more")),d=s.createElement("a",{className:"spacer-left","data-test":"reload",href:"#",onClick:function(e){e.preventDefault(),e.currentTarget.blur(),p.reload&&p.reload()}},o.translate("reload")),h=r("spacer-top note text-center",{"new-loading":!c},p.className);return p.needReload&&p.reload?t=d:u&&p.loadMore&&(t=m),s.createElement("footer",{className:h},o.translateWithParameters("x_of_y_shown",a.formatMeasure(p.count,"INT",null),a.formatMeasure(p.total,"INT",null)),t,p.loading&&s.createElement(l.default,{className:"text-bottom spacer-left position-absolute"}))}},360:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return p});var i=n(331);function r(e,t){return t.endsWith("/")||(t+="/"),l(e)?t.replace("github.com/","github.com/orgs/")+"people":t+"profile/members"}function s(e){return Object(i.b)(e)&&e.externalProvider?p(e.externalProvider):void 0}function o(e){return Object(i.b)(e)&&(a(e.externalProvider)||l(e.externalProvider))}function a(e){return!!e&&e.startsWith("bitbucket")}function l(e){return"github"===e}function c(e){return"microsoft"===e}function p(e){return a(e)?"bitbucket":e}},384:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var i=n(323),r=n(14);let s=!1;function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";return new Promise(n=>{const r=document.createElement("script");r.src="".concat(Object(i.getBaseUrl)()).concat(e),r.onload=n,document.getElementsByTagName(t)[0].appendChild(r)})}async function a(e){const t=Object(r.a)(e);if(t)return Promise.resolve(t);if(!s){(0,(await Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(279)]).then(n.bind(null,509))).default)(),s=!0}await o("/static/".concat(e,".js"));const i=Object(r.a)(e);return i||Promise.reject()}},407:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return m});var i=n(5),r=n(22);const s=["user","codeviewer","issueadmin","securityhotspotadmin","admin","scan"],o=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning"]}],a=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning","applicationcreator","portfoliocreator"]}],l=["user","admin"],c={TRK:s,VW:l,SVW:l,APP:l,DEV:["user","admin"]};function p(e,t){const n=e=>{const t="".concat(e,".sonarcloud");return Object(r.isSonarCloud)()&&Object(i.hasMessage)(t)?Object(i.translate)(t):Object(i.translate)(e)};return{key:e,name:n("".concat(t,".").concat(e)),description:n("".concat(t,".").concat(e,".desc"))}}function u(e,t){return e.map(e=>"object"==typeof e?{category:e.category,permissions:e.permissions.map(e=>p(e,t))}:p(e,t))}function m(e){return Boolean(e&&e.category)}},431:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"d",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return h}),n.d(t,"f",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return f});var i=n(393),r=n.n(i),s=n(5),o=n(317),a=n(413),l=n(551),c=n(360);const p="sonarcloud.import_org.binding_in_progress",u="sonarcloud.import_org.redirect_to_projects",m="sonarcloud.bind_org.key",d="sonarcloud.bind_org.redirect_to_org";var h;function g(e,t){const n=Object(o.formatMeasure)(e,"FLOAT").replace(/[.|,]0$/,"").replace(/([.|,]\d)$/,"$10");return t?n:Object(s.translateWithParameters)("billing.price_format",n)}!function(e){e[e.OrganizationDetails=0]="OrganizationDetails",e[e.Plan=1]="Plan"}(h||(h={}));const b=r()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0,n=void 0;if(e.installation_id)n="github",t=Object(a.parseAsOptionalString)(e.installation_id);else if(e.clientKey)n="bitbucket",t=Object(a.parseAsOptionalString)(e.clientKey);else if(e.jwt){const i=Object(l.decodeJwt)(e.jwt);i&&i.iss&&(n="bitbucket",t=i.iss)}return{almInstallId:t,almKey:n}}),f=e=>Object(a.cleanQuery)({installation_id:Object(c.e)(e.almKey)?Object(a.serializeString)(e.almInstallId):void 0,clientKey:Object(c.d)(e.almKey)?Object(a.serializeString)(e.almInstallId):void 0})},447:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(309),o=n(2);n(484);var a=n(315),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){var n=e.currentTarget.value;t.props.onCheck(n)},t.renderOption=function(e){var n=e.value===t.props.value,i=t.props.name+"__"+e.value;return o.createElement("li",{key:e.value},o.createElement("input",{checked:n,disabled:e.disabled,id:i,name:t.props.name,onChange:t.handleChange,type:"radio",value:e.value}),o.createElement(a.default,{overlay:e.tooltip||void 0},o.createElement("label",{htmlFor:i},e.label)))},t}return r(t,e),t.prototype.render=function(){return o.createElement("ul",{className:s("radio-toggle",this.props.className)},this.props.options.map(this.renderOption))},t.defaultProps={disabled:!1,value:null},t}(o.PureComponent);t.default=l},449:function(e,t,n){var i=n(400)(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});e.exports=i},480:function(e,t,n){"use strict";n.d(t,"p",function(){return o}),n.d(t,"u",function(){return a}),n.d(t,"o",function(){return l}),n.d(t,"t",function(){return c}),n.d(t,"l",function(){return p}),n.d(t,"f",function(){return u}),n.d(t,"y",function(){return m}),n.d(t,"g",function(){return d}),n.d(t,"x",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"r",function(){return f}),n.d(t,"w",function(){return y}),n.d(t,"q",function(){return v}),n.d(t,"v",function(){return C}),n.d(t,"a",function(){return O}),n.d(t,"s",function(){return j}),n.d(t,"n",function(){return P}),n.d(t,"m",function(){return E}),n.d(t,"i",function(){return _}),n.d(t,"h",function(){return k}),n.d(t,"k",function(){return S}),n.d(t,"j",function(){return N}),n.d(t,"e",function(){return x}),n.d(t,"d",function(){return T});var i=n(8),r=n(321);const s=100;function o(e){return Object(i.post)("/api/permissions/add_user",e).catch(r.a)}function a(e){return Object(i.post)("/api/permissions/remove_user",e).catch(r.a)}function l(e){return Object(i.post)("/api/permissions/add_group",e).catch(r.a)}function c(e){return Object(i.post)("/api/permissions/remove_group",e).catch(r.a)}function p(e){const t="/api/permissions/search_templates";return e?Object(i.getJSON)(t,{organization:e}):Object(i.getJSON)(t)}function u(e){return Object(i.postJSON)("/api/permissions/create_template",e)}function m(e){return Object(i.post)("/api/permissions/update_template",e)}function d(e){return Object(i.post)("/api/permissions/delete_template",e).catch(r.a)}function h(e,t){return Object(i.post)("/api/permissions/set_default_template",{templateId:e,qualifier:t})}function g(e){return Object(i.post)("/api/permissions/apply_template",e).catch(r.a)}function b(e){return Object(i.post)("/api/permissions/bulk_apply_template",e)}function f(e){return Object(i.post)("/api/permissions/add_user_to_template",e)}function y(e){return Object(i.post)("/api/permissions/remove_user_from_template",e)}function v(e){return Object(i.post)("/api/permissions/add_group_to_template",e)}function C(e){return Object(i.post)("/api/permissions/remove_group_from_template",e)}function O(e,t){return Object(i.post)("/api/permissions/add_project_creator_to_template",{templateId:e,permission:t})}function j(e,t){return Object(i.post)("/api/permissions/remove_project_creator_from_template",{templateId:e,permission:t})}function P(e){return e.ps||(e.ps=s),Object(i.getJSON)("/api/permissions/users",e).catch(r.a)}function E(e){return e.ps||(e.ps=s),Object(i.getJSON)("/api/permissions/groups",e).catch(r.a)}function _(e){return e.ps||(e.ps=s),Object(i.getJSON)("/api/permissions/users",e)}function k(e){return e.ps||(e.ps=s),Object(i.getJSON)("/api/permissions/groups",e)}function S(e,t,n,r){const o={templateId:e,ps:s};return t&&(o.q=t),n&&(o.permission=n),r&&Object.assign(o,{organization:r}),Object(i.getJSON)("/api/permissions/template_users",o).then(e=>e.users)}function N(e,t,n,r){const o={templateId:e,ps:s};return t&&(o.q=t),n&&(o.permission=n),r&&Object.assign(o,{organization:r}),Object(i.getJSON)("/api/permissions/template_groups",o).then(e=>e.groups)}function x(e,t){return Object(i.post)("/api/projects/update_visibility",{project:e,visibility:t}).catch(r.a)}function T(e,t){return Object(i.post)("/api/projects/update_default_visibility",{organization:e,projectVisibility:t}).catch(r.a)}},484:function(e,t,n){var i=n(485);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(313)(i,r);i.locals&&(e.exports=i.locals)},485:function(e,t,n){(e.exports=n(312)(!1)).push([e.i,".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff;font-weight:600}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}",""])},556:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(2),r=n(470),s=n.n(r),o=n(5),a=n(333);const l=14;function c(){return i.createElement("ul",{className:"note"},i.createElement(p,null,Object(o.translate)("billing.upgrade_box.unlimited_private_projects")),i.createElement(p,null,Object(o.translate)("billing.upgrade_box.strict_control_private_data")),i.createElement(p,null,Object(o.translate)("billing.upgrade_box.cancel_anytime")),i.createElement(p,null,i.createElement("strong",null,Object(o.translateWithParameters)("billing.upgrade_box.free_trial_x",l))))}function p(e){let t=e.children;return i.createElement("li",{className:"display-flex-center little-spacer-bottom"},i.createElement(s.a,{className:"spacer-right",fill:a.colors.lightGreen}),t)}},611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(311);t.default=function(e){var t=e.className,n=e.fill,s=e.size,o=void 0===s?36:s;return i.createElement(r.ThemedIcon,{className:t,size:o,viewBox:"0 0 36 36"},function(e){var t=e.theme;return i.createElement("g",{transform:"matrix(0.0625,0,0,0.0625,3,4)"},i.createElement("path",{d:"M148.25,224C121.25,224.833 99.167,235.5 82,256L48.5,256C34.833,256 23.333,252.625 14,245.875C4.667,239.125 0,229.25 0,216.25C0,157.417 10.333,128 31,128C32,128 35.625,129.75 41.875,133.25C48.125,136.75 56.25,140.292 66.25,143.875C76.25,147.458 86.167,149.25 96,149.25C107.167,149.25 118.25,147.333 129.25,143.5C128.417,149.667 128,155.167 128,160C128,183.167 134.75,204.5 148.25,224ZM416,383.25C416,403.25 409.917,419.042 397.75,430.625C385.583,442.208 369.417,448 349.25,448L130.75,448C110.583,448 94.417,442.208 82.25,430.625C70.083,419.042 64,403.25 64,383.25C64,374.417 64.292,365.792 64.875,357.375C65.458,348.958 66.625,339.875 68.375,330.125C70.125,320.375 72.333,311.333 75,303C77.667,294.667 81.25,286.542 85.75,278.625C90.25,270.708 95.417,263.958 101.25,258.375C107.083,252.792 114.208,248.333 122.625,245C131.042,241.667 140.333,240 150.5,240C152.167,240 155.75,241.792 161.25,245.375C166.75,248.958 172.833,252.958 179.5,257.375C186.167,261.792 195.083,265.792 206.25,269.375C217.417,272.958 228.667,274.75 240,274.75C251.333,274.75 262.583,272.958 273.75,269.375C284.917,265.792 293.833,261.792 300.5,257.375C307.167,252.958 313.25,248.958 318.75,245.375C324.25,241.792 327.833,240 329.5,240C339.667,240 348.958,241.667 357.375,245C365.792,248.333 372.917,252.792 378.75,258.375C384.583,263.958 389.75,270.708 394.25,278.625C398.75,286.542 402.333,294.667 405,303C407.667,311.333 409.875,320.375 411.625,330.125C413.375,339.875 414.542,348.958 415.125,357.375C415.708,365.792 416,374.417 416,383.25ZM160,64C160,81.667 153.75,96.75 141.25,109.25C128.75,121.75 113.667,128 96,128C78.333,128 63.25,121.75 50.75,109.25C38.25,96.75 32,81.667 32,64C32,46.333 38.25,31.25 50.75,18.75C63.25,6.25 78.333,0 96,0C113.667,0 128.75,6.25 141.25,18.75C153.75,31.25 160,46.333 160,64ZM336,160C336,186.5 326.625,209.125 307.875,227.875C289.125,246.625 266.5,256 240,256C213.5,256 190.875,246.625 172.125,227.875C153.375,209.125 144,186.5 144,160C144,133.5 153.375,110.875 172.125,92.125C190.875,73.375 213.5,64 240,64C266.5,64 289.125,73.375 307.875,92.125C326.625,110.875 336,133.5 336,160ZM480,216.25C480,229.25 475.333,239.125 466,245.875C456.667,252.625 445.167,256 431.5,256L398,256C380.833,235.5 358.75,224.833 331.75,224C345.25,204.5 352,183.167 352,160C352,155.167 351.583,149.667 350.75,143.5C361.75,147.333 372.833,149.25 384,149.25C393.833,149.25 403.75,147.458 413.75,143.875C423.75,140.292 431.875,136.75 438.125,133.25C444.375,129.75 448,128 449,128C469.667,128 480,157.417 480,216.25ZM448,64C448,81.667 441.75,96.75 429.25,109.25C416.75,121.75 401.667,128 384,128C366.333,128 351.25,121.75 338.75,109.25C326.25,96.75 320,81.667 320,64C320,46.333 326.25,31.25 338.75,18.75C351.25,6.25 366.333,0 384,0C401.667,0 416.75,6.25 429.25,18.75C441.75,31.25 448,46.333 448,64Z",style:{fill:n||t.colors.gray67}}))})}},621:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(8),r=n(321);function s(){return Object(i.getJSON)("/api/billing/show_subscription_plans").then(e=>{return e.subscriptionPlans},r.a)}},623:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(2);class r extends i.Component{render(){const e=window.SonarBilling.BillingForm;return i.createElement(e,Object.assign({},this.props))}}},687:function(e,t,n){"use strict";var i=n(2),r=n(304),s=n(28),o=n(310),a=n(448),l=n.n(a),c=n(5),p=n(621),u=n(431),m=n(556),d=n(326),h=n.n(d),g=n(314),b=n.n(g),f=n(444),y=n(384),v=n(623);const C=Object(f.a)(v.a);class O extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={ready:!1}}componentDidMount(){this.mounted=!0,Object(y.a)("billing/billing").then(()=>{this.mounted&&this.setState({ready:!0})},()=>{})}componentWillUnmount(){this.mounted=!1}render(){const e=Object(c.translate)("billing.upgrade_box.upgrade_to_paid_plan");return this.state.ready?i.createElement(h.a,{contentLabel:e,noBackdrop:this.props.insideModal,onRequestClose:this.props.onClose,shouldCloseOnOverlayClick:!1,size:"medium"},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,e)),i.createElement(C,{onCommit:this.props.onUpgradeDone,organizationKey:this.props.organization.key,subscriptionPlans:this.props.subscriptionPlans},e=>{let t=e.onSubmit,n=e.processingUpgrade,s=e.renderFormFields,a=e.renderNextCharge,l=e.renderRecap,p=e.renderSubmitButton;return i.createElement("form",{id:"organization-paid-plan-form",onSubmit:t},i.createElement("div",{className:"modal-body modal-container"},i.createElement("div",{className:"huge-spacer-bottom"},i.createElement("p",{className:"spacer-bottom"},i.createElement(r.FormattedMessage,{defaultMessage:Object(c.translate)("billing.upgrade.org_x_advantages"),id:"billing.coupon.description",values:{org:i.createElement("strong",null,this.props.organization.name)}})),i.createElement(m.a,null)),s(),i.createElement("div",{className:"big-spacer-top"},l())),i.createElement("footer",{className:"modal-foot display-flex-center display-flex-space-between"},a()||i.createElement("span",null),i.createElement("div",null,i.createElement(b.a,{loading:n}),p(),i.createElement(o.ResetButtonLink,{onClick:this.props.onClose},Object(c.translate)("cancel")))))})):null}}n.d(t,"a",function(){return j});class j extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={subscriptionPlans:[],upgradeOrganizationModal:!1},this.fetchSubscriptionPlans=()=>Object(p.a)().then(e=>{this.mounted&&this.setState({subscriptionPlans:e})}),this.handleUpgradeClick=()=>{this.setState({upgradeOrganizationModal:!0})},this.handleUpgradeOrganizationModalClose=()=>{this.mounted&&this.setState({upgradeOrganizationModal:!1})},this.handleOrganizationUpgrade=()=>{this.props.onOrganizationUpgrade(),this.handleUpgradeOrganizationModalClose()}}componentDidMount(){this.mounted=!0,this.fetchSubscriptionPlans()}componentWillUnmount(){this.mounted=!1}render(){if(!Object(c.hasMessage)("billing.upgrade_box.header"))return null;const e=this.state,t=e.subscriptionPlans,n=e.upgradeOrganizationModal,a=t[0]&&t[0].price;return i.createElement(i.Fragment,null,i.createElement(l.a,{className:this.props.className,title:Object(c.translate)("billing.upgrade_box.header"),titleInfo:void 0!==a&&i.createElement(r.FormattedMessage,{defaultMessage:Object(c.translate)("billing.price_from_x"),id:"billing.price_from_x",values:{price:i.createElement("span",{className:"big"},Object(u.f)(a))}})},i.createElement(i.Fragment,null,i.createElement(m.a,null),i.createElement("div",{className:"big-spacer-left"},i.createElement(o.Button,{className:"js-upgrade-organization",onClick:this.handleUpgradeClick},Object(c.translate)("billing.paid_plan.upgrade")),i.createElement(s.Link,{className:"spacer-left",target:"_blank",to:"/about/pricing"},Object(c.translate)("billing.pricing.learn_more"))))),n&&i.createElement(O,{insideModal:this.props.insideModal,onClose:this.handleUpgradeOrganizationModalClose,onUpgradeDone:this.handleOrganizationUpgrade,organization:this.props.organization,subscriptionPlans:t}))}}},740:function(e,t,n){var i=n(741);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(313)(i,r);i.locals&&(e.exports=i.locals)},741:function(e,t,n){(e.exports=n(312)(!1)).push([e.i,'.permissions-table .permission-column.selected{background-color:#d9edf7}.permissions-table .permission-column-inner{display:inline-block;width:100px}.permissions-table .divider{background:#fff;padding:16px 0}.permissions-table .divider:after{display:block;content:"";background:#e6e6e6;height:1px;width:100%}',""])},742:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(2),r=n(447),s=n.n(r),o=n(357),a=n.n(o),l=n(5);function c(e){const t=[{value:"all",label:Object(l.translate)("all")},{value:"users",label:Object(l.translate)("users.page")},{value:"groups",label:Object(l.translate)("user_groups.page")}];return i.createElement("div",{className:"display-flex-row"},i.createElement(s.a,{name:"users-or-groups",onCheck:e.onFilter,options:t,value:e.filter}),i.createElement("div",{className:"flex-1 spacer-left"},i.createElement(a.a,{minLength:3,onChange:e.onSearch,placeholder:Object(l.translate)("search.search_for_users_or_groups"),value:e.query})))}},743:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(309),r=n(2),s=n(5);class o extends r.PureComponent{constructor(){super(...arguments),this.handlePublicClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.props.onChange("public")},this.handlePrivateClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.props.onChange("private")}}render(){return r.createElement("div",{className:i("visibility-select",this.props.className)},r.createElement("a",{className:"link-base-color link-no-underline visibility-select-option",href:"#",id:"visibility-public",onClick:this.handlePublicClick},r.createElement("i",{className:i("icon-radio",{"is-checked":"public"===this.props.visibility})}),r.createElement("span",{className:"spacer-left"},Object(s.translate)("visibility.public"))),this.props.showDetails&&r.createElement("span",{className:"visibility-details note"},Object(s.translate)("visibility.public.description.long")),this.props.canTurnToPrivate?r.createElement(r.Fragment,null,r.createElement("a",{className:"link-base-color link-no-underline huge-spacer-left visibility-select-option",href:"#",id:"visibility-private",onClick:this.handlePrivateClick},r.createElement("i",{className:i("icon-radio",{"is-checked":"private"===this.props.visibility})}),r.createElement("span",{className:"spacer-left"},Object(s.translate)("visibility.private"))),this.props.showDetails&&r.createElement("span",{className:"visibility-details note"},Object(s.translate)("visibility.private.description.long"))):r.createElement(r.Fragment,null,r.createElement("span",{className:"huge-spacer-left text-muted cursor-not-allowed visibility-select-option",id:"visibility-private"},r.createElement("i",{className:i("icon-radio",{"is-checked":"private"===this.props.visibility})}),r.createElement("span",{className:"spacer-left"},Object(s.translate)("visibility.private"))),this.props.showDetails&&r.createElement("span",{className:"visibility-details note"},Object(s.translate)("visibility.private.description.long"))))}}},787:function(e,t,n){"use strict";var i=n(325),r=n.n(i),s=n(449),o=n.n(s),a=n(2),l=n(5),c=n(407),p=n(354),u=n.n(p),m=n(611),d=n.n(m),h=n(309),g=n(352),b=n.n(g);class f extends a.PureComponent{render(){const e=this.props,t=e.loading,n=e.onCheck,i=e.permission,r=e.permissionItem,s=e.selectedPermission;return Object(c.f)(i)?a.createElement("td",{className:"text-middle"},i.permissions.map(e=>a.createElement("div",{key:e.key},a.createElement(b.a,{checked:r.permissions.includes(e.key),disabled:t.includes(e.key),id:e.key,onCheck:n},a.createElement("span",{className:"little-spacer-left"},e.name))))):a.createElement("td",{className:h("permission-column text-center text-middle",{selected:i.key===s})},a.createElement(b.a,{checked:r.permissions.includes(i.key),disabled:t.includes(i.key),id:i.key,onCheck:n}))}}class y extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:u()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.group,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props.group;return a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-inline-block text-middle big-spacer-right"},a.createElement(d.a,null)),a.createElement("div",{className:"display-inline-block text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},e.description))),this.props.permissions.map(t=>a.createElement(f,{key:Object(c.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission})))}}var v=n(322),C=n.n(v),O=n(315),j=n.n(O),P=n(319),E=n(383);class _ extends a.PureComponent{constructor(){super(...arguments),this.handlePermissionClick=e=>{e.preventDefault(),e.currentTarget.blur();const t=this.props.permission;this.props.onSelectPermission&&!Object(c.f)(t)&&this.props.onSelectPermission(t.key)},this.getTooltipOverlay=()=>{const e=this.props.permission;return Object(c.f)(e)?e.permissions.map(e=>a.createElement(a.Fragment,{key:e.key},a.createElement("b",{className:"little-spacer-right"},e.name,":"),a.createElement(E.a,{key:e.key,message:e.description}),a.createElement("br",null))):this.props.showPublicProjectsWarning&&["user","codeviewer"].includes(e.key)?a.createElement("div",null,a.createElement(E.a,{message:e.description}),a.createElement(P.Alert,{className:"spacer-top",variant:"warning"},Object(l.translate)("projects_role.public_projects_warning"))):a.createElement(E.a,{message:e.description})}}render(){const e=this.props,t=e.onSelectPermission,n=e.permission;let i;return i=Object(c.f)(n)?Object(l.translate)("global_permissions",n.category):t?a.createElement(j.a,{overlay:Object(l.translateWithParameters)("global_permissions.filter_by_x_permission",n.name)},a.createElement("a",{href:"#",onClick:this.handlePermissionClick},n.name)):n.name,a.createElement("th",{className:h("permission-column text-center text-middle",{selected:!Object(c.f)(n)&&n.key===this.props.selectedPermission})},a.createElement("div",{className:"permission-column-inner"},i,a.createElement(C.a,{className:"spacer-left",overlay:this.getTooltipOverlay()})))}}var k=n(392),S=n(22);class N extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:u()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.user,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props.user,t=this.props.permissions.map(t=>a.createElement(f,{key:Object(c.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission}));return"<creator>"===e.login?a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-inline-block text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},Object(l.translate)(Object(S.isSonarCloud)()?"permission_templates.project_creators.explanation.sonarcloud":"permission_templates.project_creators.explanation")))),t):a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement(k.a,{className:"text-middle big-spacer-right",hash:e.avatar,name:e.name,size:36}),a.createElement("div",{className:"display-inline-block text-middle"},Object(S.isSonarCloud)()?a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"note little-spacer-top"},e.login)):a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("strong",null,e.name),a.createElement("span",{className:"note spacer-left"},e.login)),a.createElement("div",{className:"little-spacer-top"},e.email)))),t)}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){w(e,t,n[t])})}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return z});class z extends a.PureComponent{constructor(){super(...arguments),this.state={initialPermissionsCount:{}},this.handleGroupToggle=(e,t)=>{const n=e.id||e.name;return void 0===this.state.initialPermissionsCount[n]&&this.setState(t=>({initialPermissionsCount:T({},t.initialPermissionsCount,{[n]:e.permissions.length})})),this.props.onToggleGroup(e,t)},this.handleUserToggle=(e,t)=>(void 0===this.state.initialPermissionsCount[e.login]&&this.setState(t=>({initialPermissionsCount:T({},t.initialPermissionsCount,{[e.login]:e.permissions.length})})),this.props.onToggleUser(e,t)),this.getItemInitialPermissionsCount=e=>{const t=this.isPermissionUser(e)?e.login:e.id||e.name;return void 0!==this.state.initialPermissionsCount[t]?this.state.initialPermissionsCount[t]:e.permissions.length}}componentDidUpdate(e){this.props.filter===e.filter&&this.props.query===e.query||this.setState({initialPermissionsCount:{}})}isPermissionUser(e){return void 0!==e.login}renderEmpty(){const e=this.props.permissions.length+1;return a.createElement("tr",null,a.createElement("td",{colSpan:e},Object(l.translate)("no_results_search")))}renderItem(e,t){return this.isPermissionUser(e)?a.createElement(N,{key:"user-".concat(e.login),onToggle:this.handleUserToggle,permissions:t,selectedPermission:this.props.selectedPermission,user:e}):a.createElement(y,{group:e,key:"group-".concat(e.id||e.name),onToggle:this.handleGroupToggle,permissions:t,selectedPermission:this.props.selectedPermission})}render(){const e=this.props.permissions,t=r()([...this.props.users,...this.props.groups],e=>this.isPermissionUser(e)&&"<creator>"===e.login?0:e.name),n=x(o()(t,e=>this.getItemInitialPermissionsCount(e)),2),i=n[0],s=n[1];return a.createElement("div",{className:"boxed-group boxed-group-inner"},a.createElement("table",{className:"data zebra permissions-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",{className:"nowrap bordered-bottom"},this.props.children),e.map(e=>a.createElement(_,{key:Object(c.f)(e)?e.category:e.key,onSelectPermission:this.props.onSelectPermission,permission:e,selectedPermission:this.props.selectedPermission,showPublicProjectsWarning:this.props.showPublicProjectsWarning})))),a.createElement("tbody",null,0===t.length&&!this.props.loading&&this.renderEmpty(),i.map(t=>this.renderItem(t,e)),i.length>0&&s.length>0&&a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement("td",{className:"divider",colSpan:20})),a.createElement("tr",null)),s.map(t=>this.renderItem(t,e)))))}}},961:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(2),r=n(310),s=n(336),o=n.n(s),a=n(329),l=n.n(a),c=n(319),p=n(314),u=n.n(p),m=n(5),d=n(480);class h extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={done:!1,loading:!0},this.fetchPermissionTemplates=()=>{Object(d.l)(this.props.organization).then(e=>{let t=e.permissionTemplates;this.mounted&&this.setState({loading:!1,permissionTemplates:t})},()=>{this.mounted&&this.setState({loading:!1})})},this.handleSubmit=()=>this.state.permissionTemplate?Object(d.b)({organization:this.props.organization,projectKey:this.props.project.key,templateId:this.state.permissionTemplate}).then(()=>{this.mounted&&(this.props.onApply&&this.props.onApply(),this.setState({done:!0}))}):Promise.reject(void 0),this.handlePermissionTemplateChange=e=>{let t=e.value;this.setState({permissionTemplate:t})}}componentDidMount(){this.mounted=!0,this.fetchPermissionTemplates()}componentWillUnmount(){this.mounted=!1}render(){const e=Object(m.translateWithParameters)("projects_role.apply_template_to_xxx",this.props.project.name);return i.createElement(l.a,{header:e,onClose:this.props.onClose,onSubmit:this.handleSubmit,size:"small"},t=>{let n=t.onCloseClick,s=t.onFormSubmit,a=t.submitting;return i.createElement("form",{id:"project-permissions-apply-template-form",onSubmit:s},i.createElement("header",{className:"modal-head"},i.createElement("h2",null,e)),i.createElement("div",{className:"modal-body"},this.state.done?i.createElement(c.Alert,{variant:"success"},Object(m.translate)("projects_role.apply_template.success")):i.createElement(i.Fragment,null,this.state.loading?i.createElement("i",{className:"spinner"}):i.createElement("div",{className:"modal-field"},i.createElement("label",{htmlFor:"project-permissions-template"},Object(m.translate)("template"),i.createElement("em",{className:"mandatory"},"*")),this.state.permissionTemplates&&i.createElement(o.a,{clearable:!1,id:"project-permissions-template",onChange:this.handlePermissionTemplateChange,options:this.state.permissionTemplates.map(e=>({label:e.name,value:e.id})),value:this.state.permissionTemplate})))),i.createElement("footer",{className:"modal-foot"},i.createElement(u.a,{className:"spacer-right",loading:a}),!this.state.done&&i.createElement(r.SubmitButton,{disabled:a||!this.state.permissionTemplate},Object(m.translate)("apply")),i.createElement(r.ResetButtonLink,{onClick:n},Object(m.translate)(this.state.done?"close":"cancel"))))})}}}}]);
//# sourceMappingURL=293.m.24de5744.chunk.js.map