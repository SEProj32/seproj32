(window.webpackJsonp=window.webpackJsonp||[]).push([[377],{1797:function(e,t,a){"use strict";a.r(t);var n=a(309),r=a(2),s=a(316),c=a(322),l=a.n(c),i=a(319),o=a(5),m=a(565),u=a(339),p=a(328),d=a(422),v=a(318),b=a(1207),f=(a(1191),a(471)),y=a(317),h=a(356);function E(e){let t=e.className,a=e.measures,s=e.type;const c=f.c[s].afterMergeMetric,l=Object(h.findMeasure)(a,c);return l&&void 0!==l.value?r.createElement("div",{className:n(t,"display-flex-center")},r.createElement("span",{className:"huge"},Object(y.formatMeasure)(l.value,"PERCENT")),r.createElement("span",{className:"label flex-1"},Object(o.translate)("component_measures.facet_category.overall_category.estimated"))):null}var g=a(28),O=a(419),N=a(320);function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e){let t=e.branchLike,a=e.className,s=e.component,c=e.docTooltip,l=e.measures,i=e.type;const o=f.b[i],m=o.metric,d=o.iconClass,v=Object(h.findMeasure)(l,m);let b;v&&(b=Object(O.b)(v));const E=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){j(e,t,a[t])})}return e}({},Object(p.d)(t),{resolved:"false",types:i});return r.createElement(r.Fragment,null,void 0===b?r.createElement("span",{className:n(a,"measure-empty")},"—"):r.createElement(g.Link,{className:a,to:Object(N.h)(s.key,E)},Object(y.formatMeasure)(b,"SHORT_INT")),r.createElement(d,{className:"big-spacer-left little-spacer-right"}),Object(f.f)(m),c&&r.createElement(u.a,{className:"little-spacer-left",doc:c}))}var k=a(315),L=a.n(k),_=a(386),x=a.n(_),M=a(613);function S(e){let t=e.branchLike,a=e.component,n=e.measures,s=e.type;const c=f.b[s].rating,l=Object(h.findMeasure)(n,c);if(!c||!l)return null;const i=Object(O.b)(l),o=i&&Object(O.c)(c,Number(i));return r.createElement(r.Fragment,null,r.createElement("span",{className:"big-spacer-right flex-1"},Object(f.g)(s)),r.createElement(L.a,{overlay:o},r.createElement("span",null,r.createElement(M.a,{branchLike:t,className:"link-no-underline",component:a.key,metric:c},r.createElement(x.a,{value:i})))))}var T=a(304),P=a(364),C=a.n(P),q=a(333),R=a(22);function B(e){let t=e.component,a=e.level;const s="OK"===a;let c;return c=Object(R.isSonarCloud)()?void 0===t.qualityGate?Object(N.v)(t.organization):Object(N.u)(t.qualityGate.key,t.organization):void 0===t.qualityGate?Object(N.v)():Object(N.u)(t.qualityGate.key),r.createElement("div",{className:n("quality-gate-badge-large small",{failed:!s,success:s})},r.createElement("div",{className:"display-flex-center"},r.createElement("span",null,Object(o.translate)("overview.on_new_code_long")),r.createElement(l.a,{className:"little-spacer-left",overlay:r.createElement(T.FormattedMessage,{defaultMessage:Object(o.translate)("overview.quality_gate.conditions_on_new_code"),id:"overview.quality_gate.conditions_on_new_code",values:{link:r.createElement(g.Link,{to:c},Object(o.translate)("overview.quality_gate"))}})},r.createElement(C.a,{fill:q.colors.transparentWhite,size:12}))),void 0!==a&&r.createElement("h4",{className:"huge-spacer-top huge"},Object(o.translate)("metric.level",a)))}class I extends r.Component{constructor(){super(...arguments),this.getLabelText=()=>{const e=this.props,t=e.branchLike,a=e.component,n=e.measures,s=e.type,c=f.c[s],l=c.expandedLabelKey,i=c.linesMetric,m=c.labelKey,u=Object(h.findMeasure)(n,i);return u?r.createElement(T.FormattedMessage,{defaultMessage:Object(o.translate)(l),id:l,values:{count:r.createElement(M.a,{branchLike:t,component:a.key,metric:i},Object(y.formatMeasure)(Object(O.b)(u),"SHORT_INT"))}}):Object(o.translate)(m)}}render(){const e=this.props,t=e.branchLike,a=e.className,s=e.component,c=e.measures,l=e.type,i=f.c[l],o=i.iconClass,m=i.metric,u=Object(h.findMeasure)(c,m);let p;return u&&(p=Object(O.b)(u)),r.createElement(r.Fragment,null,void 0===p?r.createElement("span",{className:n(a,"measure-empty")},"—"):r.createElement(r.Fragment,null,r.createElement("span",{className:"big-spacer-right"},r.createElement(o,{size:"big",value:Number(p)})),r.createElement(M.a,{branchLike:t,className:a,component:s.key,metric:m},Object(y.formatMeasure)(p,"PERCENT"))),r.createElement("span",{className:"big-spacer-left"},this.getLabelText()))}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){F(e,t,a[t])})}return e}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"ReviewApp",function(){return G});class G extends r.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!1,measures:[]},this.fetchBranchData=()=>{const e=this.props,t=e.branchLike,a=e.component;this.setState({loading:!0}),Promise.all([Object(m.d)(D({component:a.key,metricKeys:f.e.join()},Object(p.d)(t))),this.props.fetchBranchStatus(t,a.key)]).then(e=>{let t=A(e,1)[0];this.mounted&&t&&this.setState({loading:!1,measures:t})},()=>{this.mounted&&this.setState({loading:!1})})}}componentDidMount(){this.mounted=!0,this.fetchBranchData()}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.branchLike,s=e.component,c=e.conditions,m=e.ignoredConditions,p=e.status,d=this.state,v=d.loading,f=d.measures;if(v||!c)return r.createElement("div",{className:"page page-limited"},r.createElement("i",{className:"spinner"}));const y=c.filter(e=>"ERROR"===e.level);return r.createElement("div",{className:"page page-limited"},r.createElement("div",{className:n("pr-overview",{"has-conditions":y.length>0})},m&&r.createElement(i.Alert,{className:"big-spacer-bottom",display:"inline",variant:"info"},r.createElement("span",{className:"text-middle"},Object(o.translate)("overview.quality_gate.ignored_conditions")),r.createElement(l.a,{className:"spacer-left",overlay:Object(o.translate)("overview.quality_gate.ignored_conditions.tooltip")})),r.createElement("div",{className:"display-flex-row"},r.createElement("div",{className:"pr-overview-quality-gate big-spacer-right"},r.createElement("h3",{className:"spacer-bottom small"},Object(o.translate)("overview.quality_gate"),r.createElement(u.a,{className:"spacer-left",doc:Promise.resolve().then(a.bind(null,971))})),r.createElement(B,{component:s,level:p})),y.length>0&&r.createElement("div",{className:"pr-overview-failed-conditions big-spacer-right"},r.createElement("h3",{className:"spacer-bottom small"},Object(o.translate)("overview.failed_conditions")),r.createElement(b.a,{branchLike:t,collapsible:!0,component:s,conditions:y})),r.createElement("div",{className:"pr-overview-measurements flex-1"},r.createElement("h3",{className:"spacer-bottom small"},Object(o.translate)("overview.metrics")),["BUG","VULNERABILITY","CODE_SMELL"].map(e=>r.createElement("div",{className:"pr-overview-measurements-row display-flex-row",key:e},r.createElement("div",{className:"pr-overview-measurements-value flex-1 small display-flex-center"},r.createElement(w,{branchLike:t,className:"overview-domain-measure-value",component:s,measures:f,type:e})),"VULNERABILITY"===e&&r.createElement("div",{className:"pr-overview-measurements-value flex-1 small display-flex-center"},r.createElement(w,{branchLike:t,className:"overview-domain-measure-value",component:s,docTooltip:Promise.resolve().then(a.bind(null,1190)),measures:f,type:"SECURITY_HOTSPOT"})),r.createElement("div",{className:"pr-overview-measurements-rating display-flex-center"},r.createElement(S,{branchLike:t,component:s,measures:f,type:e})))),["COVERAGE","DUPLICATION"].map(e=>r.createElement("div",{className:"pr-overview-measurements-row display-flex-row",key:e},r.createElement("div",{className:"pr-overview-measurements-value flex-1 small display-flex-center"},r.createElement(I,{branchLike:t,className:"overview-domain-measure-value",component:s,measures:f,type:e})),r.createElement(E,{className:"pr-overview-measurements-estimate",measures:f,type:e})))))))}}const U={fetchBranchStatus:d.c};t.default=Object(s.connect)((e,t)=>{let a=t.branchLike,n=t.component;const r=Object(v.getBranchStatusByBranchLike)(e,n.key,a);return{conditions:r.conditions,ignoredConditions:r.ignoredConditions,status:r.status}},U)(G)}}]);
//# sourceMappingURL=377.m.8cd1c2c4.chunk.js.map