{"version":3,"sources":["webpack:///./src/main/js/components/hoc/withNotifications.tsx","webpack:///./src/main/js/api/notifications.ts","webpack:///./src/main/js/apps/overview/notifications/ProjectNotifications.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/Checkbox.js","webpack:///./node_modules/sonar-ui-common/components/controls/ModalButton.js","webpack:///./node_modules/sonar-ui-common/components/controls/Checkbox.css?d95d","webpack:///./node_modules/sonar-ui-common/components/controls/Checkbox.css","webpack:///./src/main/js/apps/account/notifications/NotificationsList.tsx","webpack:///./node_modules/lodash/uniqWith.js"],"names":["withNotifications","WrappedComponent","Wrapper","index_js_exposed","[object Object]","this","mounted","state","channels","globalTypes","loading","notifications","perProjectTypes","fetchNotifications","Object","request","catch","throwGlobalError","then","response","setState","addNotificationToState","added","uniqWith_default","areNotificationsEqual","removeNotificationFromState","removed","filter","notification","addNotification","data","channel","project","type","removeNotification","a","b","_this$state","assign","props","displayName","utils","__webpack_require__","r","__webpack_exports__","d","ProjectNotifications","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_controls_buttons__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Modal__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_controls_Modal__WEBPACK_IMPORTED_MODULE_2___default","n","sonar_ui_common_components_controls_ModalButton__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_controls_ModalButton__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_ui_Alert__WEBPACK_IMPORTED_MODULE_4__","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_5__","sonar_ui_common_components_ui_DeferredSpinner__WEBPACK_IMPORTED_MODULE_5___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_6__","_components_hoc_withNotifications__WEBPACK_IMPORTED_MODULE_7__","_account_notifications_NotificationsList__WEBPACK_IMPORTED_MODULE_8__","className","component","header","handleAddNotification","_ref","key","handleRemoveNotification","_ref2","getCheckboxId","concat","projectNotifications","modal","_ref3","onClose","contentLabel","onRequestClose","variant","aria-label","map","checkboxId","onAdd","onRemove","types","onClick","_ref4","data-test","extendStatics","__extends","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","classNames","React","DeferredSpinner_1","Checkbox","_super","_this","apply","arguments","handleClick","event","preventDefault","currentTarget","blur","disabled","onCheck","checked","id","render","_a","children","right","thirdState","title","icon-checkbox-checked","icon-checkbox-single","icon-checkbox-disabled","createElement","aria-checked","note","href","role","default","Boolean","defaultProps","PureComponent","ModalButton","handleButtonClick","handleFormSubmit","handleCloseModal","componentDidMount","componentWillUnmount","Fragment","onFormSubmit","content","module","i","options","hmr","transform","insertInto","undefined","locals","push","NotificationsList","sonar_ui_common_components_controls_Checkbox__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Checkbox__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","find","dispatcher","globalMessageKey","projectMessageKey","_this$props","getDispatcherLabel","isEnabled","handleCheck","baseUniq","array","comparator","length"],"mappings":"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","file":"js/335.m.1b4cfdd7.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqWith } from 'lodash';\nimport * as React from 'react';\nimport { addNotification, getNotifications, removeNotification } from '../../api/notifications';\nimport { getWrappedDisplayName } from './utils';\n\ninterface State {\n  channels: string[];\n  globalTypes: string[];\n  loading: boolean;\n  notifications: T.Notification[];\n  perProjectTypes: string[];\n}\n\nexport interface WithNotificationsProps {\n  addNotification: (added: T.Notification) => void;\n  channels: string[];\n  globalTypes: string[];\n  loading: boolean;\n  notifications: T.Notification[];\n  perProjectTypes: string[];\n  removeNotification: (removed: T.Notification) => void;\n}\n\nexport function withNotifications<P>(\n  WrappedComponent: React.ComponentType<P & WithNotificationsProps>\n) {\n  class Wrapper extends React.Component<P, State> {\n    mounted = false;\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withNotifications');\n\n    state: State = {\n      channels: [],\n      globalTypes: [],\n      loading: true,\n      notifications: [],\n      perProjectTypes: []\n    };\n\n    componentDidMount() {\n      this.mounted = true;\n      this.fetchNotifications();\n    }\n\n    componentWillUnmount() {\n      this.mounted = false;\n    }\n\n    fetchNotifications = () => {\n      getNotifications().then(\n        response => {\n          if (this.mounted) {\n            this.setState({\n              channels: response.channels,\n              globalTypes: response.globalTypes,\n              loading: false,\n              notifications: response.notifications,\n              perProjectTypes: response.perProjectTypes\n            });\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ loading: false });\n          }\n        }\n      );\n    };\n\n    addNotificationToState = (added: T.Notification) => {\n      this.setState(state => {\n        const notifications = uniqWith([...state.notifications, added], this.areNotificationsEqual);\n        return { notifications };\n      });\n    };\n\n    removeNotificationFromState = (removed: T.Notification) => {\n      this.setState(state => {\n        const notifications = state.notifications.filter(\n          notification => !this.areNotificationsEqual(notification, removed)\n        );\n        return { notifications };\n      });\n    };\n\n    addNotification = (added: T.Notification) => {\n      // optimistic update\n      this.addNotificationToState(added);\n\n      // recreate `data` to omit `projectName` and `organization` from `Notification`\n      const data = { channel: added.channel, project: added.project, type: added.type };\n      addNotification(data).catch(() => {\n        this.removeNotificationFromState(added);\n      });\n    };\n\n    removeNotification = (removed: T.Notification) => {\n      // optimistic update\n      this.removeNotificationFromState(removed);\n\n      // recreate `data` to omit `projectName` and `organization` from `Notification`\n      const data = { channel: removed.channel, project: removed.project, type: removed.type };\n      removeNotification(data).catch(() => {\n        this.addNotificationToState(removed);\n      });\n    };\n\n    areNotificationsEqual = (a: T.Notification, b: T.Notification) => {\n      return a.channel === b.channel && a.type === b.type && a.project === b.project;\n    };\n\n    render() {\n      const { channels, globalTypes, loading, notifications, perProjectTypes } = this.state;\n      return (\n        <WrappedComponent\n          {...this.props}\n          addNotification={this.addNotification}\n          channels={channels}\n          globalTypes={globalTypes}\n          loading={loading}\n          notifications={notifications}\n          perProjectTypes={perProjectTypes}\n          removeNotification={this.removeNotification}\n        />\n      );\n    }\n  }\n\n  return Wrapper;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getNotifications(): Promise<{\n  channels: string[];\n  globalTypes: string[];\n  notifications: T.Notification[];\n  perProjectTypes: string[];\n}> {\n  return getJSON('/api/notifications/list').catch(throwGlobalError);\n}\n\nexport function addNotification(data: { channel: string; type: string; project?: string }) {\n  return post('/api/notifications/add', data).catch(throwGlobalError);\n}\n\nexport function removeNotification(data: { channel: string; type: string; project?: string }) {\n  return post('/api/notifications/remove', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport ModalButton from 'sonar-ui-common/components/controls/ModalButton';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  withNotifications,\n  WithNotificationsProps\n} from '../../../components/hoc/withNotifications';\nimport NotificationsList from '../../account/notifications/NotificationsList';\n\ninterface Props {\n  className?: string;\n  component: T.Component;\n}\n\nexport function ProjectNotifications(props: WithNotificationsProps & Props) {\n  const { channels, className, component, loading, notifications, perProjectTypes } = props;\n\n  const header = translate('my_account.notifications');\n\n  const handleAddNotification = ({ channel, type }: { channel: string; type: string }) => {\n    props.addNotification({ project: component.key, channel, type });\n  };\n\n  const handleRemoveNotification = ({ channel, type }: { channel: string; type: string }) => {\n    props.removeNotification({\n      project: component.key,\n      channel,\n      type\n    });\n  };\n\n  const getCheckboxId = (type: string, channel: string) => {\n    return `project-notification-${component.key}-${type}-${channel}`;\n  };\n\n  const projectNotifications = notifications.filter(n => n.project && n.project === component.key);\n\n  return (\n    <div className={className}>\n      <ModalButton\n        modal={({ onClose }) => (\n          <Modal contentLabel={header} onRequestClose={onClose}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n            <div className=\"modal-body\">\n              <Alert variant=\"info\">{translate('notification.dispatcher.information')}</Alert>\n\n              <DeferredSpinner loading={loading}>\n                <table className=\"data zebra notifications-table\">\n                  <thead>\n                    <tr>\n                      <th aria-label={translate('project')} />\n                      {channels.map(channel => (\n                        <th className=\"text-center\" key={channel}>\n                          <h4>{translate('notification.channel', channel)}</h4>\n                        </th>\n                      ))}\n                    </tr>\n                  </thead>\n\n                  <NotificationsList\n                    channels={channels}\n                    checkboxId={getCheckboxId}\n                    notifications={projectNotifications}\n                    onAdd={handleAddNotification}\n                    onRemove={handleRemoveNotification}\n                    project={true}\n                    types={perProjectTypes}\n                  />\n                </table>\n              </DeferredSpinner>\n            </div>\n            <footer className=\"modal-foot\">\n              <ResetButtonLink className=\"js-modal-close\" onClick={onClose}>\n                {translate('close')}\n              </ResetButtonLink>\n            </footer>\n          </Modal>\n        )}>\n        {({ onClick }) => (\n          <Button onClick={onClick}>\n            <span data-test=\"overview__edit-notifications\">\n              {translate('my_profile.per_project_notifications.edit')}\n            </span>\n          </Button>\n        )}\n      </ModalButton>\n    </div>\n  );\n}\n\nexport default withNotifications(ProjectNotifications);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nrequire(\"./Checkbox.css\");\nvar Checkbox = (function (_super) {\n    __extends(Checkbox, _super);\n    function Checkbox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            event.preventDefault();\n            event.currentTarget.blur();\n            if (!_this.props.disabled) {\n                _this.props.onCheck(!_this.props.checked, _this.props.id);\n            }\n        };\n        return _this;\n    }\n    Checkbox.prototype.render = function () {\n        var _a = this.props, checked = _a.checked, children = _a.children, disabled = _a.disabled, id = _a.id, loading = _a.loading, right = _a.right, thirdState = _a.thirdState, title = _a.title;\n        var className = classNames('icon-checkbox', {\n            'icon-checkbox-checked': checked,\n            'icon-checkbox-single': thirdState,\n            'icon-checkbox-disabled': disabled\n        });\n        if (children) {\n            return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames('link-checkbox', this.props.className, {\n                    note: disabled,\n                    disabled: disabled\n                }), href: \"#\", id: id, onClick: this.handleClick, role: \"checkbox\", title: title },\n                right && children,\n                React.createElement(DeferredSpinner_1.default, { loading: Boolean(loading) },\n                    React.createElement(\"i\", { className: className })),\n                !right && children));\n        }\n        if (loading) {\n            return React.createElement(DeferredSpinner_1.default, null);\n        }\n        return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames(className, this.props.className), href: \"#\", id: id, onClick: this.handleClick, role: \"checkbox\", title: title }));\n    };\n    Checkbox.defaultProps = {\n        thirdState: false\n    };\n    return Checkbox;\n}(React.PureComponent));\nexports.default = Checkbox;\n//# sourceMappingURL=Checkbox.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar ModalButton = (function (_super) {\n    __extends(ModalButton, _super);\n    function ModalButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mounted = false;\n        _this.state = { modal: false };\n        _this.handleButtonClick = function () {\n            _this.setState({ modal: true });\n        };\n        _this.handleFormSubmit = function (event) {\n            if (event) {\n                event.preventDefault();\n            }\n            _this.setState({ modal: true });\n        };\n        _this.handleCloseModal = function () {\n            if (_this.mounted) {\n                _this.setState({ modal: false });\n            }\n        };\n        return _this;\n    }\n    ModalButton.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    ModalButton.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    ModalButton.prototype.render = function () {\n        return (React.createElement(React.Fragment, null,\n            this.props.children({\n                onClick: this.handleButtonClick,\n                onFormSubmit: this.handleFormSubmit\n            }),\n            this.state.modal && this.props.modal({ onClose: this.handleCloseModal })));\n    };\n    return ModalButton;\n}(React.PureComponent));\nexports.default = ModalButton;\n//# sourceMappingURL=ModalButton.js.map","\nvar content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Checkbox.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Checkbox.css\", function() {\n\t\tvar newContent = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Checkbox.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".icon-checkbox{display:inline-block;line-height:1;vertical-align:top;padding:1px 2px;box-sizing:border-box}a.icon-checkbox{border-bottom:none}.icon-checkbox:focus{outline:none}.icon-checkbox:before{content:\\\" \\\";display:inline-block;width:10px;height:10px;border:1px solid #236a97;border-radius:2px;transition:border-color .2s ease,background-color .2s ease,background-image .2s ease,box-shadow .4s ease}.icon-checkbox:not(.icon-checkbox-disabled):focus:before,.link-checkbox:not(.disabled):focus:focus .icon-checkbox:before{box-shadow:0 0 0 3px rgba(35,106,151,.25)}.icon-checkbox-checked:before{background-color:#4b9fd5;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M12 4.665c0 .172-.06.318-.18.438l-5.55 5.55c-.12.12-.266.18-.438.18s-.318-.06-.438-.18L2.18 7.438C2.06 7.317 2 7.17 2 7s.06-.318.18-.44l.878-.876c.12-.12.267-.18.44-.18.17 0 .317.06.437.18l1.897 1.903 4.233-4.24c.12-.12.266-.18.438-.18s.32.06.44.18l.876.88c.12.12.18.265.18.438z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E\\\");border-color:#4b9fd5}.icon-checkbox-checked.icon-checkbox-single:before{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M10 4.698A.697.697 0 0 0 9.302 4H4.698A.697.697 0 0 0 4 4.698v4.604c0 .386.312.698.698.698h4.604A.697.697 0 0 0 10 9.302V4.698z' fill='%23fff'/%3E%3C/svg%3E\\\")}.icon-checkbox-disabled:before{border:1px solid #bbb;cursor:not-allowed}.icon-checkbox-disabled.icon-checkbox-checked:before{background-color:#bbb}.icon-checkbox-invisible{visibility:hidden}.link-checkbox{color:inherit;border-bottom:none}.link-checkbox.disabled,.link-checkbox.disabled:hover,.link-checkbox.disabled label{color:#777;cursor:not-allowed}.link-checkbox:active,.link-checkbox:focus,.link-checkbox:hover{color:inherit}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onAdd: (n: T.Notification) => void;\n  onRemove: (n: T.Notification) => void;\n  channels: string[];\n  checkboxId: (type: string, channel: string) => string;\n  project?: boolean;\n  types: string[];\n  notifications: T.Notification[];\n}\n\nexport default class NotificationsList extends React.PureComponent<Props> {\n  isEnabled(type: string, channel: string) {\n    return !!this.props.notifications.find(\n      notification => notification.type === type && notification.channel === channel\n    );\n  }\n\n  handleCheck(type: string, channel: string, checked: boolean) {\n    if (checked) {\n      this.props.onAdd({ type, channel });\n    } else {\n      this.props.onRemove({ type, channel });\n    }\n  }\n\n  getDispatcherLabel(dispatcher: string) {\n    const globalMessageKey = ['notification.dispatcher', dispatcher];\n    const projectMessageKey = [...globalMessageKey, 'project'];\n    const shouldUseProjectMessage = this.props.project && hasMessage(...projectMessageKey);\n    return shouldUseProjectMessage\n      ? translate(...projectMessageKey)\n      : translate(...globalMessageKey);\n  }\n\n  render() {\n    const { channels, checkboxId, types } = this.props;\n\n    return (\n      <tbody>\n        {types.map(type => (\n          <tr key={type}>\n            <td>{this.getDispatcherLabel(type)}</td>\n            {channels.map(channel => (\n              <td className=\"text-center\" key={channel}>\n                <Checkbox\n                  checked={this.isEnabled(type, channel)}\n                  id={checkboxId(type, channel)}\n                  onCheck={checked => this.handleCheck(type, channel, checked)}\n                />\n              </td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    );\n  }\n}\n","var baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `comparator` which\n * is invoked to compare elements of `array`. The order of result values is\n * determined by the order they occur in the array.The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.uniqWith(objects, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n */\nfunction uniqWith(array, comparator) {\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n}\n\nmodule.exports = uniqWith;\n"],"sourceRoot":""}