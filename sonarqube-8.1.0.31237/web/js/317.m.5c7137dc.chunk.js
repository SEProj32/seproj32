(window.webpackJsonp=window.webpackJsonp||[]).push([[317],{1818:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n(324),a=n.n(s),o=n(5),i=n(482),l=n(343),c=n(332),u=n(446),p=n(576),d=n(336),h=n.n(d);class m extends r.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!1},this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.handleChange=e=>{const t=this.props.gate,n=null==t&&null!=e.value,r=null!=t&&null==e.value,s=null!=t&&t.id!==Number(e.value);(n||r||s)&&(this.setState({loading:!0}),this.props.onChange(t&&t.id,Number(e.value)).then(this.stopLoading,this.stopLoading))},this.renderGateName=e=>e.isDefault?r.createElement("span",null,r.createElement("strong",null,Object(o.translate)("default")),": ",e.label):r.createElement("span",null,e.label)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}renderSelect(){const e=this.props,t=e.gate,n=e.allGates.map(e=>({value:String(e.id),label:e.name,isDefault:e.isDefault}));return r.createElement(h.a,{clearable:!1,disabled:this.state.loading,onChange:this.handleChange,optionRenderer:this.renderGateName,options:n,style:{width:300},value:t&&String(t.id),valueRenderer:this.renderGateName})}render(){return r.createElement("div",null,this.renderSelect(),this.state.loading&&r.createElement("i",{className:"spinner spacer-left"}))}}var g=n(339);function f(){return r.createElement("header",{className:"page-header"},r.createElement("div",{className:"page-title display-flex-center"},r.createElement("h1",null,Object(o.translate)("project_quality_gate.page")),r.createElement(g.a,{className:"spacer-left",doc:Promise.resolve().then(n.bind(null,962))})),r.createElement("div",{className:"page-description"},Object(o.translate)("project_quality_gate.page.description")))}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"default",function(){return y});class y extends r.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:!0},this.handleChangeGate=(e,t)=>{const n=this.state.allGates;if(!e&&!t||!n)return Promise.resolve();const r=this.props.component,s={gateId:t||e,organization:r.organization,projectKey:r.key};return(t?Object(i.a)(s):Object(i.g)(s)).then(()=>{if(this.mounted)if(Object(u.a)(Object(o.translate)("project_quality_gate.successfully_updated")),t){const e=n.find(e=>e.id===t);e&&(this.setState({gate:e}),this.props.onComponentChange({qualityGate:e}))}else this.setState({gate:void 0})})}}componentDidMount(){this.mounted=!0,this.checkPermissions()?this.fetchQualityGates():Object(p.a)()}componentWillUnmount(){this.mounted=!1}checkPermissions(){const e=this.props.component.configuration;return!!(e&&e.showQualityGates)}fetchQualityGates(){const e=this.props.component;this.setState({loading:!0}),Promise.all([Object(i.i)({organization:e.organization}),Object(i.k)({organization:e.organization,project:e.key})]).then(e=>{let t=v(e,2),n=t[0].qualitygates,r=t[1];this.mounted&&this.setState({allGates:n,gate:r,loading:!1})},()=>{this.mounted&&this.setState({loading:!1})})}render(){if(!this.checkPermissions())return null;const e=this.state,t=e.allGates,n=e.gate,s=e.loading;return r.createElement("div",{className:"page page-limited",id:"project-quality-gate"},r.createElement(c.a,{suggestions:"project_quality_gate"}),r.createElement(a.a,{title:Object(o.translate)("project_quality_gate.page")}),r.createElement(l.a,{anchor:"qg_main"}),r.createElement(f,null),s?r.createElement("i",{className:"spinner"}):t&&r.createElement(m,{allGates:t,gate:n,onChange:this.handleChangeGate}))}}},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(309),s=n(2),a=n(364),o=n(335);n(337);var i=n(315);t.default=function(e){var t=e.tagName,n=void 0===t?"div":t;return s.createElement(n,{className:r("help-tooltip",e.className)},s.createElement(i.default,{mouseLeaveDelay:.25,onShow:e.onShow,overlay:e.overlay,placement:e.placement},s.createElement("span",{className:"display-inline-flex-center"},e.children||s.createElement(o.ThemeConsumer,null,function(e){return s.createElement(a.default,{fill:e.colors.gray71,size:12})}))))}},332:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),s=n(350);function a(e){let t=e.suggestions;return r.createElement(s.a.Consumer,null,e=>{let n=e.addSuggestions,s=e.removeSuggestions;return r.createElement(o,{addSuggestions:n,removeSuggestions:s,suggestions:t})})}class o extends r.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},337:function(e,t,n){var r=n(338);"string"==typeof r&&(r=[[e.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(313)(r,s);r.locals&&(e.exports=r.locals)},338:function(e,t,n){(e.exports=n(312)(!1)).push([e.i,".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}",""])},339:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2),s=n(322),a=n.n(s),o=n(327),i=n(365);const l=Object(o.lazyLoad)(()=>Promise.all([n.e(7),n.e(345)]).then(n.bind(null,438)));class c extends r.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={open:!1},this.close=()=>{this.mounted&&this.setState({open:!1})}}componentDidMount(){this.mounted=!0,this.props.doc.then(e=>{let t=e.default;this.mounted&&this.setState({content:t})},()=>{}),document.addEventListener("scroll",this.close,!0)}componentWillUnmount(){this.mounted=!1,document.removeEventListener("scroll",this.close,!0)}render(){return this.state.content?r.createElement(a.a,{className:this.props.className,overlay:r.createElement("div",{className:"abs-width-300"},r.createElement(l,{childProps:this.props.overlayProps,className:"cut-margins",content:Object(i.filterContent)(this.state.content),isTooltip:!0}))},this.props.children):this.props.children||null}}},343:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2),s=n(5),a=n(401);function o(e){return r.createElement(a.a.Consumer,null,t=>{let n=t.addA11ySkipLink,s=t.removeA11ySkipLink;return r.createElement(i,Object.assign({addA11ySkipLink:n,removeA11ySkipLink:s},e))})}class i extends r.PureComponent{constructor(){super(...arguments),this.getLink=()=>{const e=this.props,t=e.anchor,n=e.label;return{key:t,label:void 0===n?Object(s.translate)("skip_to_content"):n,weight:e.weight}}}componentDidMount(){this.props.addA11ySkipLink(this.getLink())}componentWillUnmount(){this.props.removeA11ySkipLink(this.getLink())}render(){const e=this.props.anchor;return r.createElement("span",{id:"a11y_target__".concat(e)})}}},365:function(e,t,n){"use strict";function r(e){let t,n;for(let r=0;r<e.length;r++){if("---"===e[r].trim()){if(void 0!==t){n=r;break}t=r}}return void 0!==n?{firstLine:t,lastLine:n}:void 0}function s(e){const t={};for(let n=0;n<e.length;n++){const r=e[n].split(":").map(e=>e.trim());2===r.length&&(t[r[0]]=r[1])}return t}function a(e,t){const n="\x3c!-- ".concat(t," --\x3e"),r="\x3c!-- /".concat(t," --\x3e");let s=e,a=s.indexOf(n),o=s.indexOf(r);for(;-1!==a&&-1!==o;)a=(s=s.substring(0,a)+s.substring(o+r.length)).indexOf(n),o=s.indexOf(r);return s}e.exports={getFrontMatter:function(e){const t=e.split("\n"),n=r(t);return n?s(t.slice(n.firstLine+1,n.lastLine)):{}},separateFrontMatter:function(e){const t=e.split("\n"),n=r(t);if(n){const e=s(t.slice(n.firstLine+1,n.lastLine)),r=t.slice(n.lastLine+1).join("\n");return{frontmatter:e,content:r}}return{frontmatter:{},content:e}},filterContent:function(e){const t="\x3c!-- \\/?(sonarqube|sonarcloud|static) --\x3e",r=n(22),s=r.isSonarCloud,o=r.getInstance,i=a(e.replace(/{instance}/gi,o()),"static");return(s()?a(i,"sonarqube"):a(i,"sonarcloud")).replace(new RegExp("^".concat(t,"(\n|\r|\r\n|$)"),"gm"),"").replace(new RegExp("".concat(t),"g"),"")}}},371:function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(5),l=n(8),c=n(319);t.lazyLoadComponent=function(e,t){var n=o.lazy(function(){return l.requestTryAndRepeatUntil(e,{max:2,slowThreshold:2},function(){return!0})});function r(e){return o.createElement(u,null,o.createElement(o.Suspense,{fallback:null},o.createElement(n,a({},e))))}return r.displayName=t,r};var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1},t}return s(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.render=function(){return this.state.hasError?o.createElement(c.Alert,{variant:"error"},i.translate("default_error_message")):this.props.children},t}(o.Component);t.LazyErrorBoundary=u},446:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(382),s=n(391);function a(e){Object(s.default)().dispatch(r.b(e))}},576:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(33),s=n.n(r),a=n(546),o=n(391);function i(){const e=Object(o.default)(),t=s()(),n=window.location.pathname+window.location.search+window.location.hash;e.dispatch(Object(a.c)()),t.replace({pathname:"/sessions/new",query:{return_to:n}})}},962:function(e,t,n){"use strict";n.r(t),t.default="The Default gate is applied to all projects not explicitly assigned to a gate. Quality Profile and Gate administrators can assign projects to a gate from the Quality Profile page. Project administrators can also choose a non-default gate.\n"}}]);
//# sourceMappingURL=317.m.5c7137dc.chunk.js.map