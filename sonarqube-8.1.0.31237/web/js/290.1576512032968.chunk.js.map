{"version":3,"sources":["webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./src/main/js/components/common/LocationIndex.css?e5a0","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8e38","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?30c0","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/styles.css?b990","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/tags/TagsList.css?aed4","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsSelector.tsx"],"names":["LocationIndex","props","children","leading","onClick","selected","other","__rest","clickAttributes","role","tabIndex","react__WEBPACK_IMPORTED_MODULE_1__","__assign","className","classnames__WEBPACK_IMPORTED_MODULE_0__","is-leading","__webpack_require__","d","__webpack_exports__","StatusHelper","react__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_StatusIcon__WEBPACK_IMPORTED_MODULE_1___default","n","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_2__","resolution","Object","a","status","PAGE_SIZE","loadPageAndNext","query","toLine","page","pageSize","api_issues","p","ps","then","r","issues","map","issue","helpers_issues","components","users","rules","loadPage","length","lastIssue","textRange","endLine","nextIssues","__spreadArrays","loadIssues_loadIssues","component","_fromLine","branchLike","additionalFields","resolved","componentKeys","s","branch_like","buildQuery","Promise","resolve","EMPTY_ARRAY","ZERO_LINE","code","duplicated","isNew","line","_super","SourceViewerCode","_this","apply","this","arguments","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","renderLine","_a","index","displayCoverage","displayDuplications","displayIssues","_b","highlightedLocationMessage","highlightedLocations","selectedIssue","sources","secondaryIssueLocations","issueLocations","duplicationsCount","duplications","issuesForLine","index_js_exposed","Line","displayAllIssues","displayIssueLocationsCount","displayIssueLocationsLink","displayLocationMarkers","highlighted","highlightedLine","helpers_lines","highlightedSymbols","symbolsByLine","issuePopup","key","last","hasSourcesAfter","linePopup","loadDuplications","onIssueChange","onIssuePopupToggle","onIssueSelect","onIssueUnselect","onIssuesClose","onIssuesOpen","onLinePopupToggle","onLocationSelect","onSymbolClick","openIssues","openIssuesByLine","previousLine","undefined","renderDuplicationPopup","scroll","__extends","prototype","render","some","coverageStatus","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","l10n","buttons","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","MeasuresOverlayMeasure","measure","data-metric","metric","includes","IssueTypeIcon_default","Measure","metricKey","metricType","type","small","value","MeasuresOverlay","mounted","state","loading","measures","showAllMeasures","fetchData","all","fetchMeasures","fetchIssues","facets","setState","MeasuresOverlay_assign","api_metrics","metrics","metricKeys","js_helpers_measures","api_measures","sourceViewerFile","join","withMetrics","filter","keyBy_default","severitiesFacet","find","f","property","tagsFacet","typesFacet","values","handleAllMeasuresClick","event","preventDefault","currentTarget","blur","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","violations","sqale_index","sortBy_default","constants","indexOf","val","helpers_measures","count","SeverityHelper","severity","TagsIcon_default","renderCoverage","coverage","CoverageRating","size","uncovered_lines","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplicated_lines_density","DuplicationsRating_default","muted","Number","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","groupBy_default","domainKeys","keys","odd","_","even","MeasuresOverlay_extends","componentDidMount","componentWillUnmount","header","Modal_default","contentLabel","onRequestClose","onClose","QualifierIcon_default","qualifier","es","to","helpers_urls","project","projectName","subProject","subProjectName","q","path","href","METRIC_KEY_FOR_ISSUE_TYPE","BUG","VULNERABILITY","CODE_SMELL","SECURITY_HOTSPOT","SourceViewerHeader","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","renderIssueMeasures","componentMeasures","params","SourceViewerHeader_assign","fileUuids","uuid","types","m","SourceViewerHeader_extends","showMeasures","unitTestsOrLines","rawSourcesLink","urls","querystring_es3","request","helpers_path","clipboard","copyValue","canMarkAsFavorite","Favorite","favorite","fav","components_MeasuresOverlay","duplicationDensity","Dropdown_default","overlay","rel","target","overlayPlacement","popups","BottomRight","ListIcon_default","LINES","SourceViewerBase_SourceViewerBase","SourceViewerBase","call","loadSources","reject","from","aroundLine","Math","max","response","firstSourceLine","loadIssues","prevState","uniqBy_default","SourceViewerBase_spreadArrays","indexing","computeCoverageStatus","SourceViewerBase_assign","lastSourceLine","fromLine","slice","duplicatedFiles","files","name","handleLinePopupToggle","open","samePopup","closeLinePopup","handleIssuePopupToggle","popupName","handleSymbolClick","symbols","intersection_default","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","blocks","helpers_duplications","context","Consumer","DuplicationPopup","inRemovedComponent","notAccessible","notExist","sourceRemoved","SourceViewerBase_extends","fetchComponent","componentWillReceiveProps","nextProps","componentDidUpdate","prevProps","isLineOutsideOfRange","fetchSources","selectedIssue_1","reloadIssues","getCoverageStatus","lineNumber","firstLine","lastList","loadComponent","finalSources_1","onLoaded","onFailLoadSources","finalSources_2","renderCode","SourceViewer_SourceViewerCode","componentKey","renderHeader","slimHeader","SourceViewerHeaderSlim","SourceViewer_SourceViewerHeader","Alert","variant","classnames","source-duplications-expanded","SourceViewerContext","Provider","file","ref","node","defaultProps","defaultLoadComponent","defaultLoadSources","sourceViewerComponent","leakPeriodDate","content","module","i","options","hmr","transform","insertInto","locals","exports","push","LocationMessage","actions_updateIssue","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","SelectListItem","handleSelect","onSelect","item","handleHover","onHover","renderLink","classnames_default","active","onFocus","onMouseOver","Tooltip_default","title","placement","SelectList","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","srcElement","isInput","keyCode","selectNextElement","selectPreviousElement","detachShortcuts","idx","items","renderChild","child","common_SelectListItem","currentItem","SelectList_extends","hasChildren","LIST_SIZE","SetAssigneePopup_SetAssigneePopup","SetAssigneePopup","searchMembers","organizations","organization","projectOrganization","handleSearchResult","searchUsers","api_users","activeUsers","helpers_users","currentUser","login","handleSearchChange","defaultUsersArray","system","SetAssigneePopup_extends","Dropdown","noPadding","SearchBox_default","autoFocus","minLength","placeholder","common_SelectList","map_default","user","Avatar","hash","avatar","style","marginLeft","popups_SetAssigneePopup","withCurrentUser","IssueAssign","toggleAssign","togglePopup","handleClose","IssueAssign_extends","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","Toggler_default","closeOnEscape","isOpen","onAssign","DropdownIcon_default","CommentPopup","handleCommentChange","textComment","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","CommentPopup_extends","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","IssueCommentAction","addComment","text","issueKey","IssueCommentAction_extends","closeOnClickOutside","currentPopup","popups_CommentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","SeverityIcon_default","IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","IssueSeverity_extends","canSetSeverity","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup","searchResult","onSearch","min","selectedTags","tags","tag","setTags","SetIssueTagsPopup_spreadArrays","onUnselect","without_default","SetIssueTagsPopup_extends","availableTags","difference_default","TagsSelector","listSize","IssueTags","toggleSetTags","IssueTags_extends","canSetTags","popups_SetIssueTagsPopup","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","translateTransition","description","IssueTransition","setTransition","toggleSetTransition","IssueTransition_extends","hasTransitions","TYPES","SetTypePopup","IssueType","toggleSetType","setType","IssueType_extends","canSetType","fill","theme","baseFontColor","IssueActionsBar","popup","apiCall","IssueActionsBar_assign","handleTransition","IssueActionsBar_extends","actions","canComment","isSecurityHotspot","components_IssueType","components_IssueSeverity","components_IssueTransition","components_IssueAssign","effort","components_IssueCommentAction","components_IssueTags","CommentDeletePopup","onDelete","IssueCommentLine","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","force","closePopups","IssueCommentLine_extends","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","purify","htmlText","DateFromNow","date","createdAt","updatable","IssueChangelogDiff","message","diff","oldValue","newValue","ChangelogPopup","changelog","ChangelogPopup_extends","loadChangelog","DateTimeFormatter","creationDate","userName","isUserActive","diffs","IssueChangelog","toggleChangelog","handleClick","IssueChangelog_extends","popups_ChangelogPopup","mouseEnterDelay","IssueMessage","openRule","rule","IssueMessage_extends","aria-label","engine","manualVulnerability","SimilarIssuesPopup","onFilter","SimilarIssuesPopup_extends","SimilarIssuesPopup_spreadArrays","ruleName","componentQualifier","componentLongName","SimilarIssuesFilter","handleFilter","SimilarIssuesFilter_extends","popups_SimilarIssuesPopup","FilterIcon_default","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","reduce","sum","locations","locationsBadge","displayLocations","displayLocationsCount","issueUrl","IssueTitleBar_assign","components_IssueMessage","externalRuleEngine","components_IssueChangelog","displayLocationsLink","LinkIcon_default","components_SimilarIssuesFilter","IssueView","handleCheck","onCheck","isClickable","toUpperCase","parentElement","editComment","deleteComment","IssueView_extends","hasCheckbox","issueClass","hotspot","issue-with-checkbox","data-issue","components_IssueActionsBar","comments","components_IssueCommentLine","Checkbox_default","checked","Issue_Issue","Issue","onPopupToggle","handleAssignement","Issue_extends","bindShortcuts","componentWillUpdate","unbindShortcuts","issue_IssueView","formatterOption","year","month","day","longFormatterOption","DateFormatter","long","react_intl__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","hour","minute","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_icons_SeverityIcon__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1__","sonar_ui_common_components_controls_Tooltip__WEBPACK_IMPORTED_MODULE_1___default","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_ui_Level__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_ui_Rating__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_helpers_measures__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","decimals","level","formattedValue","tooltip","rating","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","periods","period","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","getLeakPeriod","getPeriodLabel","getPeriodDate","sonar_ui_common_helpers_dates__WEBPACK_IMPORTED_MODULE_0__","sonar_ui_common_helpers_l10n__WEBPACK_IMPORTED_MODULE_1__","Array","isArray","getPeriod","dateFormatter","parameter","modeParam","mode","toLowerCase","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2__","sonar_ui_common_components_icons_DropdownIcon__WEBPACK_IMPORTED_MODULE_2___default","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3__","sonar_ui_common_components_icons_TagsIcon__WEBPACK_IMPORTED_MODULE_3___default","sonar_ui_common_components_lazyLoadComponent__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","e","t","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","_c","data","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","width","thickness","height","MultiSelectOption","evt","onSelectChange","element","icon-checkbox-checked","icon-checkbox-invisible","activeClass","custom","renderLabel","MultiSelect_MultiSelect","MultiSelect","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","MultiSelect_extends","container","addEventListener","totalElements","searchInput","focus","removeEventListener","allowSelection","allowNewElements","_d","footerNode","_e","activeElement","showNewElement","infiniteList","listClasses","menu-vertically-limited","spacer-top","with-top-separator","with-bottom-separator","Boolean","div","common_MultiSelectOption","window","_helpers_urls__WEBPACK_IMPORTED_MODULE_3__","_common_MultiSelect__WEBPACK_IMPORTED_MODULE_2__","validateTag","replace"],"mappings":"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","file":"js/290.1576512032968.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { BranchLike } from '../../../types/branch-like';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(\n  query: T.RawQuery,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: T.RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { BranchLike } from '../../types/branch-like';\nimport Line from './components/Line';\nimport { getSecondaryIssueLocationsForLine } from './helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from './helpers/lines';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { highlightedLocationMessage, highlightedLocations, selectedIssue, sources } = this.props;\n\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, highlightedLocations);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizeLocationMessage(\n          highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(\n          this.props.symbolsByLine[line.line],\n          this.props.highlightedSymbols\n        )}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLinePopupToggle={this.props.onLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(selectedIssue, issuesForLine)}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { getLocalizedMetricName } from 'sonar-ui-common/helpers/l10n';\nimport Measure from '../../measure/Measure';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {['bugs', 'vulnerabilities', 'code_smells'].includes(measure.metric.key) && (\n          <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />\n        )}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, keyBy, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport { getLocalizedMetricName, translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { ISSUE_TYPES, SEVERITIES } from '../../../helpers/constants';\nimport { enhanceMeasuresWithMetrics, getDisplayMetrics } from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport Measure from '../../measure/Measure';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderMeasure(measures.lines)}\n            {this.renderMeasure(measures.ncloc)}\n            {this.renderMeasure(measures.comment_lines)}\n            {this.renderMeasure(measures.comment_lines_density)}\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(measures.cognitive_complexity)}\n            {this.renderMeasure(measures.complexity)}\n            {this.renderMeasure(measures.function_complexity)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations && !!measures.violations.value && (\n            <>\n              {typesFacet && (\n                <div className=\"measures\">\n                  {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                        {translate('issue.type', f.val)}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {severitiesFacet && (\n                <div className=\"measures\">\n                  {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <SeverityHelper severity={f.val} />\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {tagsFacet && (\n                <div className=\"measures\">\n                  {tagsFacet.map(f => (\n                    <div className=\"measure measure-one-line\" key={f.val}>\n                      <span className=\"measure-name\">\n                        <TagsIcon className=\"little-spacer-right\" />\n                        {f.val}\n                      </span>\n                      <span className=\"measure-value\">{formatMeasure(f.count, 'SHORT_INT')}</span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.uncovered_lines)}\n            {this.renderMeasure(this.state.measures.lines_to_cover)}\n            {this.renderMeasure(this.state.measures.uncovered_conditions)}\n            {this.renderMeasure(this.state.measures.conditions_to_cover)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"measures-viewer-section\">\n        <div className=\"measures-viewer-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            {this.renderMeasure(this.state.measures.duplicated_blocks)}\n            {this.renderMeasure(this.state.measures.duplicated_lines)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"measures-viewer\">\n        <div className=\"measures-viewer-section measures-viewer-section-limited\">\n          <div className=\"measures-viewer-card\">\n            <div className=\"measures\">\n              {this.renderMeasure(measures.tests)}\n              {this.renderMeasure(measures.test_success_density)}\n              {this.renderMeasure(measures.test_failures)}\n              {this.renderMeasure(measures.test_errors)}\n              {this.renderMeasure(measures.skipped_tests)}\n              {this.renderMeasure(measures.test_execution_time)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"measures-viewer-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measure measure-big\">\n            <span className=\"measure-name\">{domain}</span>\n          </div>\n          {sortBy(measures.filter(measure => measure.value !== undefined), measure =>\n            getLocalizedMetricName(measure.metric)\n          ).map(measure => this.renderMeasure(measure))}\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"measures-viewer measures-viewer-secondary\">\n        <div className=\"measures-viewer-section\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"measures-viewer-section\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    const header = translate('component_viewer.file_measures');\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"large\">\n        <div className=\"modal-head\">\n          <h2>{header}</h2>\n        </div>\n        <div className=\"modal-body modal-container\">\n          <div className=\"measures-viewer-header big-spacer-bottom\">\n            <div>\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"measures-viewer\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport ListIcon from 'sonar-ui-common/components/icons/ListIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { getBaseUrl, getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getCodeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport Favorite from '../controls/Favorite';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport MeasuresOverlay from './components/MeasuresOverlay';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  componentMeasures?: T.Measure[];\n  openComponent: WorkspaceContextShape['openComponent'];\n  showMeasures?: boolean;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nconst METRIC_KEY_FOR_ISSUE_TYPE: { [type in T.IssueType]: string } = {\n  BUG: 'bugs',\n  VULNERABILITY: 'vulnerabilities',\n  CODE_SMELL: 'code_smells',\n  SECURITY_HOTSPOT: 'security_hotspots'\n};\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  renderIssueMeasures = () => {\n    const { branchLike, componentMeasures, sourceViewerFile } = this.props;\n    return (\n      componentMeasures &&\n      componentMeasures.length > 0 && (\n        <>\n          <div className=\"source-viewer-header-measure-separator\" />\n\n          {['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'].map((type: T.IssueType) => {\n            const params = {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false',\n              types: type\n            };\n\n            const measure = componentMeasures.find(\n              m => m.metric === METRIC_KEY_FOR_ISSUE_TYPE[type]\n            );\n            return (\n              <div className=\"source-viewer-header-measure\" key={type}>\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('issue.type', type)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  <Link to={getComponentIssuesUrl(sourceViewerFile.project, params)}>\n                    {formatMeasure((measure && measure.value) || 0, 'INT')}\n                  </Link>\n                </span>\n              </div>\n            );\n          })}\n        </>\n      )\n    );\n  };\n\n  render() {\n    const { showMeasures } = this.props;\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName\n    } = this.props.sourceViewerFile;\n    const unitTestsOrLines = q === 'UTS' ? 'tests' : 'lines';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header display-flex-center\">\n        <div className=\"flex-1 little-spacer-top\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject !== undefined && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              <span className=\"nudged-up spacer-left\">\n                <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n              </span>\n              {this.props.sourceViewerFile.canMarkAsFavorite &&\n                (!this.props.branchLike || isMainBranch(this.props.branchLike)) && (\n                  <Favorite\n                    className=\"component-name-favorite spacer-left\"\n                    component={key}\n                    favorite={this.props.sourceViewerFile.fav || false}\n                    qualifier={this.props.sourceViewerFile.q}\n                  />\n                )}\n            </div>\n          </div>\n        </div>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        {showMeasures && (\n          <div className=\"display-flex-center\">\n            {measures[unitTestsOrLines] && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate(`metric.${unitTestsOrLines}.name`)}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures[unitTestsOrLines], 'SHORT_INT')}\n                </span>\n              </div>\n            )}\n\n            {measures.coverage !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('metric.coverage.name')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.coverage, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {measures.duplicationDensity !== undefined && (\n              <div className=\"source-viewer-header-measure\">\n                <span className=\"source-viewer-header-measure-label\">\n                  {translate('duplications')}\n                </span>\n                <span className=\"source-viewer-header-measure-value\">\n                  {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n                </span>\n              </div>\n            )}\n\n            {this.renderIssueMeasures()}\n          </div>\n        )}\n\n        <Dropdown\n          className=\"source-viewer-header-actions flex-0\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { intersection, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { getBranchLikeQuery, isSameBranchLike } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { WorkspaceContext } from '../workspace/context';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport {\n  filterDuplicationBlocksByLine,\n  getDuplicationBlocksForIndex,\n  isDuplicationBlockInRemovedComponent\n} from './helpers/duplications';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerHeaderSlim from './SourceViewerHeaderSlim';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: BranchLike | undefined;\n  component: string;\n  componentMeasures?: T.Measure[];\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent: (\n    component: string,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n  showMeasures?: boolean;\n  slimHeader?: boolean;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  displayDuplications: boolean;\n  duplicatedFiles?: T.Dict<T.DuplicatedFile>;\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup?: T.LinePopup;\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayIssueLocationsCount: true,\n    displayIssueLocationsLink: true,\n    displayLocationMarkers: true,\n    loadComponent: defaultLoadComponent,\n    loadIssues: defaultLoadIssues,\n    loadSources: defaultLoadSources\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayDuplications: false,\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.props.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                displayDuplications: false,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                linePopup: undefined,\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = (response: Response) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.props\n      .loadComponent(this.props.component, this.props.branchLike)\n      .then(onResolve, onFailLoadComponent);\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.props\n      .loadIssues(\n        this.props.component,\n        firstSourceLine && firstSourceLine.line,\n        lastSourceLine && lastSourceLine.line,\n        this.props.branchLike\n      )\n      .then(\n        issues => {\n          if (this.mounted) {\n            this.setState({\n              issues,\n              issuesByLine: issuesByLine(issues),\n              issueLocationsByLine: locationsByLine(issues)\n            });\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = (response: Response) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.props\n        .loadSources(this.props.component, from, to, this.props.branchLike)\n        .then(sources => resolve(sources), onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    this.props\n      .loadSources(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n      .then(\n        sources => {\n          this.props\n            .loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n            .then(\n              issues => {\n                if (this.mounted) {\n                  this.setState(prevState => {\n                    const nextIssues = uniqBy(\n                      [...issues, ...(prevState.issues || [])],\n                      issue => issue.key\n                    );\n                    return {\n                      issues: nextIssues,\n                      issuesByLine: issuesByLine(nextIssues),\n                      issueLocationsByLine: locationsByLine(nextIssues),\n                      loadingSourcesBefore: false,\n                      sources: [\n                        ...this.computeCoverageStatus(sources),\n                        ...(prevState.sources || [])\n                      ],\n                      symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n                    };\n                  });\n                }\n              },\n              () => {\n                // TODO\n              }\n            );\n        },\n        () => {\n          // TODO\n        }\n      );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    this.props.loadSources(this.props.component, fromLine, toLine, this.props.branchLike).then(\n      sources => {\n        this.props.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...(prevState.issues || []), ...issues],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  hasSourcesAfter: sources.length > LINES,\n                  loadingSourcesAfter: false,\n                  sources: [\n                    ...(prevState.sources || []),\n                    ...this.computeCoverageStatus(sources.slice(0, LINES))\n                  ],\n                  symbolsByLine: {\n                    ...prevState.symbolsByLine,\n                    ...symbolsByLine(sources.slice(0, LINES))\n                  }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = (line: T.SourceLine) => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState(state => ({\n            displayDuplications: true,\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files,\n            linePopup:\n              r.duplications.length === 1\n                ? { index: 0, line: line.line, name: 'duplications' }\n                : state.linePopup\n          }));\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleLinePopupToggle = ({ index, line, name, open }: T.LinePopup) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.name === name &&\n        state.linePopup.line === line &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: { index, line, name } };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLinePopup = () => {\n    this.setState({ linePopup: undefined });\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) {\n      return null;\n    }\n\n    const blocks = getDuplicationBlocksForIndex(duplications, index);\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={filterDuplicationBlocksByLine(blocks, line)}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={isDuplicationBlockInRemovedComponent(blocks)}\n            onClose={this.closeLinePopup}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        linePopup={this.state.linePopup}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  renderHeader(branchLike: BranchLike | undefined, sourceViewerFile: T.SourceViewerFile) {\n    return this.props.slimHeader ? (\n      <SourceViewerHeaderSlim branchLike={branchLike} sourceViewerFile={sourceViewerFile} />\n    ) : (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <SourceViewerHeader\n            branchLike={this.props.branchLike}\n            componentMeasures={this.props.componentMeasures}\n            openComponent={openComponent}\n            showMeasures={this.props.showMeasures}\n            sourceViewerFile={sourceViewerFile}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    const className = classNames('source-viewer', {\n      'source-duplications-expanded': this.state.displayDuplications\n    });\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className={className} ref={node => (this.node = node)}>\n          {this.renderHeader(this.props.branchLike, component)}\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(component: string, branchLike: BranchLike | undefined) {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([sourceViewerComponent, { component }]) => ({\n    ...sourceViewerComponent,\n    leakPeriodDate: component.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;line-height:16px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DateFromNow from '../../intl/DateFromNow';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\ninterface Props {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  openRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  rule: string;\n}\n\nexport default class IssueMessage extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.openRule({\n      key: this.props.rule,\n      organization: this.props.organization\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"issue-message\">\n        <span className=\"spacer-right\">{this.props.message}</span>\n        <Button\n          aria-label={translate('issue.rule_details')}\n          className=\"button button-link issue-see-rule spacer-right text-top\"\n          onClick={this.handleClick}>\n          {translate('issue.see_rule')}\n        </Button>\n\n        {this.props.engine && (\n          <Tooltip\n            overlay={translateWithParameters('issue.from_external_rule_engine', this.props.engine)}>\n            <div className=\"badge spacer-right text-top\">{this.props.engine}</div>\n          </Tooltip>\n        )}\n        {this.props.manualVulnerability && (\n          <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n            <div className=\"badge spacer-right text-top\">\n              {translate('issue.manual_vulnerability')}\n            </div>\n          </Tooltip>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            openRule={openRule}\n            organization={issue.organization}\n            rule={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".source-viewer{width:100%;min-height:200px;border:1px solid #cdcdcd;box-sizing:border-box;background-color:#fff;overflow:hidden}.source-table{width:100%;border:none;border-collapse:collapse}.source-viewer-header{position:relative;padding:2px 10px 4px;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3}.source-viewer-header-measure{vertical-align:middle;font-size:13px}.source-viewer-header-measure .rating{font-size:18px}.source-viewer-header-measure-separator{margin:0 24px;height:30px;border-right:1px solid #cdcdcd}.source-viewer-header-measure+.source-viewer-header-measure{margin-left:24px}.source-viewer-header-measure-label{display:block;line-height:12px;color:#777;font-size:12px}.source-viewer-header-measure-value{display:block;margin-top:2px;line-height:18px;color:#444;font-size:16px}.source-viewer-header-actions{display:block;margin-left:24px;padding:8px 4px}.source-viewer-header-actions svg{margin-top:2px}.source-viewer-header-more-actions{position:absolute;z-index:7500;right:0;top:100%;padding:10px;border:1px solid #e6e6e6;border-right:none;background-color:#fff;line-height:1.8}.source-viewer-code{overflow-x:auto}.source-viewer-more-code{padding:40px 0;border-bottom:1px solid #e6e6e6;background-color:#f3f3f3;text-align:center}.source-viewer-more-code .spinner{top:-1px}.source-table+.source-viewer-more-code{border-bottom:none;border-top:1px solid #e6e6e6}.source-viewer-bubble-popup{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.issue-location.highlighted{border-color:#e1e1f2;background-color:#e1e1f2}.issue-location.selected{border-color:#f4b1b0;background-color:#f4b1b0}.measures-viewer{display:flex;margin:0 -8px}.measures-viewer+.measures-viewer{margin-top:8px}.measures-viewer-header{font-size:12px}.measures-viewer-secondary .measures-viewer-card{background-color:#f3f3f3}.measures-viewer-section{flex:1}.measures-viewer-section-limited{max-width:25%}.measures-viewer-card{margin:16px 8px;padding:8px;border:1px solid #e6e6e6;background-color:#fff}.measures+.measures{margin-top:16px;padding-top:16px;border-top:1px solid #e6e6e6}.measures-chart{display:inline-block;vertical-align:middle;width:80px;margin-right:24px;text-align:center}.measure{line-height:1.34}.measure-one-line{display:flex;justify-content:space-between}.measure-one-line .measure-name{display:inline}.measure-name{display:block;font-size:13px}.measure-value{color:#236a97;font-size:16px;font-weight:400}.measure-big{display:inline-block;vertical-align:middle}.measure-big .measure-name{margin-top:4px;margin-bottom:8px;font-size:16px}.measure-big .measure-value,.measure-big .rating{font-size:24px}.measure-big+.measure-big{margin-left:24px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span></span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span className={classNames('tags-list', className)} title={tags.join(', ')}>\n      <TagsIcon className=\"text-middle\" />\n      <span className=\"text-ellipsis text-middle\">{tags.join(', ')}</span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\ninterface Props {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (elem: string) => void;\n  onSelectChange: (elem: string, selected: boolean) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default class MultiSelectOption extends React.PureComponent<Props> {\n  handleSelect = (evt: React.SyntheticEvent<HTMLAnchorElement>) => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.currentTarget.blur();\n\n    if (!this.props.disabled) {\n      this.props.onSelectChange(this.props.element, !this.props.selected);\n    }\n  };\n\n  handleHover = () => this.props.onHover(this.props.element);\n\n  render() {\n    const { selected, disabled } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': selected,\n      'icon-checkbox-invisible': disabled\n    });\n    const activeClass = classNames({ active: this.props.active, disabled });\n\n    return (\n      <li>\n        <a\n          className={activeClass}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          <i className={className} /> {this.props.custom && '+ '}\n          {this.props.renderLabel(this.props.element)}\n        </a>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (item: string, selected: boolean) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n"],"sourceRoot":""}